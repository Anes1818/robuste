<!DOCTYPE html>
<html dir="rtl" lang="fr">
<head>
<meta name="description" content="متجر Robuste eulma - أجهزة كهربائية منزلية بجودة عالية وأسعار تنافسية في الجزائر مع ضمان سنتين وتوصيل سريع">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- أيقونة SVG -->
<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">

<!-- Theme color -->
<meta name="theme-color" content="#ff6600">
<title>Robuste eulma- Boutique</title>

<!-- Google Fonts (Tajawal) -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">

<!-- Bootstrap RTL -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

<style>
:root {
    --primary: #FF6B35;
    --primary-dark: #E05A2B;
    --secondary: #FFF8F0;
    --light: #FFFFFF;
    --dark: #333333;
    --gray: #6C757D;
    --success: #28a745;
    --danger: #dc3545;
    --border-color: #e7e7e7;
    --shadow-color: rgba(0, 0, 0, 0.1);
}

/* تحسين نظام دارك مود محترف */
:root[data-theme="dark"] {
    --primary: #FF8C42;
    --primary-dark: #FF6B35;
    --secondary: #121212; /* خلفية أغمق واحترافية */
    --light: #1e1e1e; /* كروت ومواد بلون داكن محايد */
    --dark: #f5f5f5; /* نصوص بلون فاتح */
    --gray: #a0a0a0; /* نصوص ثانوية بلون رمادي فاتح */
    --success: #4CAF50;
    --danger: #f44336;
    --border-color: rgba(255, 255, 255, 0.1); /* حدود شفافة */
    --shadow-color: rgba(0, 0, 0, 0.3);
}

body {
    font-family: 'Tajawal', sans-serif;
    background-color: var(--secondary);
    color: var(--dark);
    padding-top: 56px;
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* تطبيق دارك مود على العناصر */
[data-theme="dark"] body {
    background-color: var(--secondary);
    color: var(--dark);
}

[data-theme="dark"] .navbar {
    background-color: #1a1a1a !important;
    box-shadow: 0 2px 15px rgba(0, 0, 0, 0.3);
    border-bottom: 1px solid var(--border-color);
}

[data-theme="dark"] .navbar-brand {
    color: var(--primary) !important;
}

[data-theme="dark"] .nav-link {
    color: var(--dark) !important;
    opacity: 0.9;
}

[data-theme="dark"] .nav-link:hover {
    color: var(--primary) !important;
    opacity: 1;
}

[data-theme="dark"] .nav-link.active {
    color: var(--primary) !important;
    font-weight: 600;
}

[data-theme="dark"] .navbar-toggler {
    border-color: var(--border-color);
    color: var(--dark);
}

[data-theme="dark"] .navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.9%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
}

[data-theme="dark"] .section-title {
    color: var(--dark);
}

[data-theme="dark"] .section-title::after {
    background-color: var(--primary);
}

/* كروت المنتجات */
[data-theme="dark"] .product-card {
    background: var(--light);
    border: 1px solid var(--border-color);
    box-shadow: 0 4px 12px var(--shadow-color);
}

[data-theme="dark"] .product-card:hover {
    border-color: var(--primary);
    box-shadow: 0 8px 25px rgba(255, 107, 53, 0.2);
    transform: translateY(-4px);
}

[data-theme="dark"] .product-title {
    color: var(--dark);
}

[data-theme="dark"] .current-price {
    color: var(--primary);
}

[data-theme="dark"] .old-price {
    color: var(--gray);
}

/* قسم العروض */
[data-theme="dark"] .offers-section {
    background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
    color: white;
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
}

[data-theme="dark"] .offer-timer {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .timer-item {
    background: rgba(255, 255, 255, 0.05);
}

[data-theme="dark"] .timer-item:hover {
    background: rgba(255, 255, 255, 0.1);
}

/* كروت العرض */
[data-theme="dark"] .offer-product {
    background: var(--light);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    border: 1px solid var(--border-color);
}

[data-theme="dark"] .offer-product:hover {
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
    border-color: var(--primary);
}

[data-theme="dark"] .offer-product-title {
    color: var(--dark);
}

/* آراء العملاء */
[data-theme="dark"] #reviews.bg-light {
    background-color: #181818 !important;
}

[data-theme="dark"] .review-card {
    background: var(--light);
    border: 1px solid var(--border-color);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

[data-theme="dark"] .review-card:hover {
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    border-color: var(--primary);
}

/* نافذة الطلب */
[data-theme="dark"] .modal-content {
    background: var(--light);
    border: 1px solid var(--border-color);
}

[data-theme="dark"] .modal-header {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
}

[data-theme="dark"] .order-summary {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
}

[data-theme="dark"] .form-control,
[data-theme="dark"] .form-select {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
    color: var(--dark);
}

[data-theme="dark"] .form-control:focus,
[data-theme="dark"] .form-select:focus {
    background: rgba(255, 255, 255, 0.08);
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
}

/* سلة المشتريات */
[data-theme="dark"] .offcanvas {
    background: var(--light) !important;
}

[data-theme="dark"] .offcanvas-header {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
}

[data-theme="dark"] .cart-item {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
}

[data-theme="dark"] .quantity-input {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
    color: var(--dark);
}

[data-theme="dark"] .cart-summary {
    background: rgba(255, 255, 255, 0.05);
    border-top: 1px solid var(--border-color);
}

/* الفوتر */
[data-theme="dark"] footer.bg-dark {
    background-color: #1a1a1a !important;
    border-top: 1px solid var(--border-color);
}

[data-theme="dark"] footer {
    color: var(--dark);
}

[data-theme="dark"] footer a {
    color: var(--gray) !important;
}

[data-theme="dark"] footer a:hover {
    color: var(--primary) !important;
}

[data-theme="dark"] footer hr.bg-light {
    background-color: var(--border-color) !important;
}

/* كروت الاتصال */
[data-theme="dark"] .contact-card {
    background: var(--light);
    border: 1px solid var(--border-color);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

[data-theme="dark"] .contact-card:hover {
    border-color: var(--primary);
}

/* زر السلة */
[data-theme="dark"] .cart-btn {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .cart-label {
    background: rgba(255, 255, 255, 0.1);
    color: var(--dark);
}

/* زر الواتساب */
[data-theme="dark"] .whatsapp-btn {
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
}

/* تحسينات إضافية */
[data-theme="dark"] .categories-filter {
    border-bottom: 1px solid var(--border-color);
}

[data-theme="dark"] .category-btn {
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid var(--border-color);
    color: var(--dark);
}

[data-theme="dark"] .category-btn:hover,
[data-theme="dark"] .category-btn.active {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    border-color: var(--primary);
}

/* زر دارك مود محسّن */
.theme-toggle {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: var(--dark);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    margin-left: 10px;
    position: relative;
    overflow: hidden;
    font-size: 1.2rem;
}

.theme-toggle::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.5s;
}

.theme-toggle:hover::before {
    left: 100%;
}

[data-theme="light"] .theme-toggle {
    background: rgba(0, 0, 0, 0.05);
    border: 1px solid rgba(0, 0, 0, 0.1);
    color: var(--dark);
}

[data-theme="dark"] .theme-toggle {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: var(--dark);
}

.theme-toggle:hover {
    background: var(--primary);
    color: white;
    transform: rotate(15deg) scale(1.1);
    border-color: var(--primary);
}

/* تأثيرات انتقال سلسة */
body,
.navbar,
.product-card,
.review-card,
.contact-card,
.offer-product,
.cart-item,
.form-control,
.form-select,
.category-btn {
    transition: background-color 0.3s ease, 
                border-color 0.3s ease, 
                color 0.3s ease, 
                transform 0.3s ease,
                box-shadow 0.3s ease;
}

/* تحسين رؤوية النصوص */
[data-theme="dark"] h1,
[data-theme="dark"] h2,
[data-theme="dark"] h3,
[data-theme="dark"] h4,
[data-theme="dark"] h5,
[data-theme="dark"] h6 {
    color: var(--dark);
    opacity: 0.95;
}

[data-theme="dark"] p {
    color: var(--gray);
    opacity: 0.9;
}

/* شريط التمرير */
[data-theme="dark"] ::-webkit-scrollbar {
    width: 10px;
}

[data-theme="dark"] ::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 5px;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* بقية الأنماط الأصلية تبقى كما هي */
.navbar {
    background-color: var(--light);
    box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.navbar-brand {
    color: var(--primary) !important;
    font-weight: 700;
    font-size: 1.5rem;
}

.section-title {
    position: relative;
    margin-bottom: 40px;
    padding-bottom: 15px;
    font-weight: 800;
    color: var(--dark);
    text-align: center;
}

.section-title::after {
    content: '';
    position: absolute;
    bottom: 0;
    right: 50%;
    transform: translateX(50%);
    width: 80px;
    height: 4px;
    background-color: var(--primary);
    border-radius: 2px;
}

/* تصميم جديد يشبه أمازون */
.product-card {
    border: 1px solid #e7e7e7;
    border-radius: 8px;
    overflow: hidden;
    height: 100%;
    display: flex;
    flex-direction: column;
    transition: all 0.3s ease;
    background: white;
}

.product-card:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    transform: translateY(-3px);
}

.image-container {
    position: relative;
    padding: 10px;
    flex-grow: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 180px;
    background: #f8f8f8;
}

.product-image {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    transition: transform 0.3s;
}

.product-card:hover .product-image {
    transform: scale(1.05);
}

.product-info {
    padding: 12px;
    border-top: 1px solid #eee;
}

.product-title {
    font-size: 14px;
    font-weight: 500;
    color: #333;
    margin-bottom: 8px;
    height: 40px;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.price-section {
    margin-bottom: 10px;
}

.current-price {
    font-size: 16px;
    font-weight: 700;
    color: #B12704;
}

.old-price {
    font-size: 13px;
    color: #767676;
    text-decoration: line-through;
    margin-right: 5px;
}

.buy-btn {
    width: 100%;
    background: #FFD814;
    border: none;
    border-radius: 20px;
    padding: 8px;
    font-size: 13px;
    font-weight: 600;
    color: #111;
    cursor: pointer;
    transition: all 0.2s;
}

.buy-btn:hover {
    background: #F7CA00;
}

.discount-badge {
    position: absolute;
    top: 10px;
    left: 10px;
    background: #CC0C39;
    color: white;
    padding: 3px 8px;
    border-radius: 3px;
    font-size: 12px;
    font-weight: 700;
    z-index: 2;
}

/* تحسينات للهاتف */
@media (max-width: 768px) {
    .image-container {
        height: 150px;
        padding: 5px;
    }
    
    .product-title {
        font-size: 13px;
        height: 36px;
    }
    
    .current-price {
        font-size: 15px;
    }
    
    .old-price {
        font-size: 12px;
    }
    
    .buy-btn {
        padding: 6px;
        font-size: 12px;
    }
    
    .theme-toggle {
        width: 38px;
        height: 38px;
        font-size: 1.1rem;
    }
}

@media (max-width: 576px) {
    .image-container {
        height: 120px;
    }
    
    .theme-toggle {
        width: 36px;
        height: 36px;
        font-size: 1rem;
    }
}

.btn-orange {
    background-color: var(--primary);
    color: white;
    border: none;
    padding: 10px 25px;
    border-radius: 8px;
    font-weight: 700;
    transition: all 0.3s;
}

.btn-orange:hover {
    background-color: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.whatsapp-btn {
    position: fixed;
    bottom: 25px;
    left: 25px;
    z-index: 1000;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: #25D366;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    box-shadow: 0 5px 15px rgba(37, 211, 102, 0.3);
    transition: all 0.3s;
}

.whatsapp-btn:hover {
    transform: scale(1.1);
}

/* بقية الأنماط تبقى كما هي */
.status-indicator {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 2000;
    max-width: 350px;
}

.spinner-border {
    width: 1.5rem;
    height: 1.5rem;
    border-width: 0.2em;
}

.order-confirmation {
    background-color: rgba(255, 255, 255, 0.95);
    border-left: 5px solid var(--success);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.order-error {
    background-color: rgba(255, 255, 255, 0.95);
    border-left: 5px solid var(--danger);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.contact-card {
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    height: 100%;
}

.feature-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: var(--primary);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    margin-bottom: 15px;
}

/* أنماط الهيرو الجديدة */
.hero-container {
    width: 100%;
    overflow: hidden;
    position: relative;
    height: auto;
}

.hero-image-container {
    width: 100%;
    position: relative;
}

.hero-image {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
}

.image-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
}

.hero-content {
    color: white;
    z-index: 2;
    width: 100%;
    padding: 20px;
}

/* تعديلات للاستجابة */
@media (max-width: 768px) {
    .hero-title {
        font-size: 2rem !important;
    }
    
    .hero-subtitle {
        font-size: 1.1rem !important;
    }
    
    .hero-content {
        padding: 15px;
    }
}

@media (max-width: 576px) {
    .hero-title {
        font-size: 1.5rem !important;
    }
    
    .hero-subtitle {
        font-size: 1rem !important;
    }
    
    .hero-content .btn {
        padding: 8px 16px;
        font-size: 0.9rem;
    }
}

.product-badge {
    position: absolute;
    top: 15px;
    right: 15px;
    background-color: var(--primary);
    color: white;
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
    z-index: 1;
}

.discount-badge {
    position: absolute;
    top: 15px;
    left: 15px;
    background-color: var(--success);
    color: white;
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
    z-index: 1;
}

.review-card {
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    height: 100%;
    transition: all 0.3s;
}

.review-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
}

.map-container {
    height: 300px;
    border-radius: 12px;
    overflow: hidden;
}

/* تحسينات التجاوب */
@media (max-width: 768px) {
    .hero-title {
        font-size: 2rem;
    }
    .hero-subtitle {
        font-size: 1.1rem;
    }
    .section-title {
        font-size: 1.5rem;
    }
    .map-container {
        height: 250px;
    }
}

.social-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: rgba(0,0,0,0.1);
    color: var(--dark);
    margin-left: 10px;
    transition: all 0.3s;
}

.social-icon:hover {
    background-color: var(--primary);
    color: white;
    transform: translateY(-3px);
}

.confirmation-icon {
    font-size: 5rem;
    color: var(--success);
    margin-bottom: 20px;
    animation: pulse 1s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.order-summary {
    background-color: #f8f9fa;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
}

.product-image-thumb {
    width: 60px;
    height: 60px;
    border-radius: 8px;
    object-fit: cover;
}

.form-control:focus, .form-select:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 0.25rem rgba(255, 107, 53, 0.25);
}

/* تحسينات إضافية */
.whatsapp-contact-btn {
    background-color: #25D366;
    color: white;
    font-weight: 600;
    transition: all 0.3s;
}

.whatsapp-contact-btn:hover {
    background-color: #128C7E;
    color: white;
}

.feature-item {
    transition: transform 0.3s ease;
}

.feature-item:hover {
    transform: translateY(-5px);
}

/* ============== قسم العروض الخاصة ============== */
.offers-section {
  background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 50%, #FFA552 100%);
  padding: 80px 0;
  color: white;
  text-align: center;
  position: relative;
  overflow: hidden;
  margin: 0px 0;
}

.offers-section::before {
  content: "";
  position: absolute;
  inset: 0;
  background: url('https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80') center/cover;
  opacity: 0.08;
  filter: blur(2px);
}

.products-grid > * {
  flex: 0 0 auto; /* يمنع التمدد */
  scroll-snap-align: start; /* يخلي العنصر يبدأ من البداية */
}

/* ===== العنوان ===== */
.offers-title {
  font-size: 2.8rem;
  font-weight: 800;
  margin-bottom: 20px;
  position: relative;
  display: inline-block;
  text-shadow: 2px 2px 6px rgba(0,0,0,0.35);
}

.offers-title::after {
  content: "";
  position: absolute;
  bottom: -12px;
  left: 50%;
  transform: translateX(-50%);
  width: 120px;
  height: 5px;
  background-color: white;
  border-radius: 3px;
}

.offer-subtitle {
  font-size: 1.25rem;
  max-width: 700px;
  margin: 0 auto 40px;
  opacity: 0.95;
  line-height: 1.6;
}

/* ===== تايمر ===== */
.offer-timer {
  background: rgba(255,255,255,0.15);
  border-radius: 15px;
  padding: 20px;
  max-width: 550px;
  margin: 0 auto 50px;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.15);
  box-shadow: 0 6px 20px rgba(0,0,0,0.15);
}

.timer-title {
  font-size: 1.2rem;
  margin-bottom: 20px;
  font-weight: 600;
  letter-spacing: 0.5px;
}

.timer-content {
  display: flex;
  justify-content: center;
  gap: 15px;
}

.timer-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-width: 80px;
  padding: 15px 10px;
  background: rgba(255,255,255,0.15);
  border-radius: 12px;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}

.timer-item::after {
  content: "";
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 3px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.timer-item:hover {
  transform: translateY(-5px);
  background: rgba(255,255,255,0.25);
}

.timer-value {
  font-size: 2.2rem;
  font-weight: 800;
  margin-bottom: 5px;
}

.timer-label {
  font-size: 0.95rem;
  opacity: 0.9;
  font-weight: 500;
}

/* ===== المنتجات ===== */
.offer-products {
  max-width: 1600px;
  margin: 40px auto 0;
  display: flex;
  flex-wrap: nowrap;
  gap: 30px;
  padding: 0 20px;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
}

.offer-product {
  flex: 0 0 320px;
  background: white;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(0,0,0,0.12);
  transition: transform 0.35s ease, box-shadow 0.35s ease;
  display: flex;
  flex-direction: column;
  position: relative;
  scroll-snap-align: start;
}

.offer-product:hover {
  transform: translateY(-10px) scale(1.02);
  box-shadow: 0 15px 40px rgba(0,0,0,0.2);
}

/* ===== بادجات ===== */
.offer-product-discount {
  position: absolute;
  top: 15px; left: 15px;
  background: linear-gradient(135deg, #CC0C39, #FF073A);
  color: white;
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 700;
  box-shadow: 0 4px 10px rgba(204,12,57,0.3);
  z-index: 2;
}

.offer-product-badge {
  position: absolute;
  top: 15px; right: 15px;
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  color: white;
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 700;
  box-shadow: 0 4px 10px rgba(255,107,53,0.3);
  z-index: 2;
}

/* ===== صورة المنتج (كاروسيل) ===== */
.offer-product .carousel {
  position: relative;
  height: auto;
  overflow: hidden;
  border-radius: 16px 16px 0 0;
}

.offer-product .carousel-inner {
  display: flex;
  transition: transform 0.6s ease-in-out;
}

.offer-product .carousel-item {
  min-width: 100%;
}

.carousel-item img {
    height: 200px;
    object-fit: cover; transition: transform 3s ease;
}

@media (min-width: 768px) {
    .carousel-item img {
      height: 300px;
    }
}

.offer-product:hover .carousel-item img {
  transform: scale(1.05);
}

/* ===== أزرار الكاروسيل ===== */
.offer-product .carousel-control-prev,
.offer-product .carousel-control-next {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 42px;
  height: 42px;
  border-radius: 50%;
  background: rgba(255,255,255,0.8);
  backdrop-filter: blur(6px);
  border: 2px solid rgba(255,107,53,0.6);
  display: flex;
  align-items: center;
  justify-content: space-between;
  opacity: 0;
  transition: all 0.3s ease;
  z-index: 3;
}

.offer-product:hover .carousel-control-prev,
.offer-product:hover .carousel-control-next {
  opacity: 1;
}

.offer-product .carousel-control-prev { left: 160px; }
.offer-product .carousel-control-next { right: 87%; }

.offer-product .carousel-control-prev-icon,
.offer-product .carousel-control-next-icon {
  filter: invert(1) drop-shadow(0 0 2px rgba(0,0,0,0.4));
}

/* ===== نصوص وأسعار ===== */
.offer-product-content {
  padding: 18px;
  display: flex;
  flex-direction: column;
  flex-grow: 1;
}

.offer-product-title {
  font-weight: 600;
  font-size: 1rem;
  color: #333;
  margin-bottom: 8px;
  line-height: 1.4;
  max-height: 42px;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.offer-product-price {
  font-size: 1.3rem;
  font-weight: 800;
  color: var(--primary);
}

.offer-product-old-price {
  font-size: 0.9rem;
  text-decoration: line-through;
  color: #777;
}

/* ===== زر الشراء ===== */
.offer-btn {
  margin-top: auto;
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  color: white;
  border: none;
  border-radius: 10px;
  padding: 12px 18px;
  text-align: center;
  font-weight: 700;
  font-size: 0.95rem;
  transition: all 0.3s ease;
  box-shadow: 0 4px 14px rgba(255,107,53,0.25);
}

.offer-btn:hover {
  transform: translateY(-2px);
  background: linear-gradient(135deg, var(--primary-dark), #D84315);
  box-shadow: 0 6px 20px rgba(255,107,53,0.4);
}

/* ===== Responsive ===== */
@media (max-width: 768px) {
  .offers-title { font-size: 2rem; margin-bottom: 15px; }
  .offer-subtitle { font-size: 1.1rem; margin-bottom: 30px; padding: 0 15px; }
  .offer-products { gap: 18px; }
  .offer-product { flex: 0 0 250px; }
  .offer-product .carousel { height: auto; }
}

@media (min-width: 769px) and (max-width: 1199px) {
  .offer-products { justify-content: flex-start; }
}

@media (min-width: 1200px) {
  .offer-products {
    justify-content: center;
    overflow-x: hidden;
  }
}

.product-card {
    border-radius: 10px;
    overflow: hidden;
    transition: transform 0.3s, box-shadow 0.3s;
    border: 1px solid #eee;
}

.product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
}

.product-card .card-body {
    padding: 15px;
}

.product-card .card-title {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 8px;
    height: 40px;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.product-card .card-text {
    font-size: 0.85rem;
    height: 40px;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.product-card .card-footer {
    padding: 10px 15px;
}

/* تحسينات للهاتف */
@media (max-width: 768px) {
    .product-card {
        margin-bottom: 15px;
    }
    
    .product-card .card-title {
        font-size: 0.9rem;
        height: 36px;
    }
    
    .product-card .card-text {
        font-size: 0.8rem;
        height: 36px;
    }
    
    .product-card .btn-orange {
        padding: 8px 12px;
        font-size: 0.8rem;
    }
}

/* أضف هذا في قسم الأنماط */
.categories-filter {
    padding: 15px 0;
    border-bottom: 1px solid #eee;
    margin-bottom: 30px;
}

.category-btn {
    border-radius: 20px;
    padding: 8px 20px;
    font-weight: 500;
    transition: all 0.3s;
    border-width: 2px;
}

.category-btn:hover, .category-btn.active {
    background-color: var(--primary);
    color: white;
    border-color: var(--primary);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(255, 107, 53, 0.2);
}

/* تحسينات للجوال */
@media (max-width: 768px) {
    .categories-filter {
        overflow-x: auto;
        white-space: nowrap;
        padding-bottom: 10px;
    }
    
    .categories-filter .d-flex {
        flex-wrap: nowrap;
        padding-bottom: 10px;
    }
    
    .category-btn {
        padding: 6px 15px;
        font-size: 0.9rem;
    }
}

/* أضف هذا في قسم الـ media queries للهاتف */
@media (max-width: 768px) {
    /* تصغير حجم قسم العروض */
    .offers-section {
        padding: 30px 0 !important;
    }

    /* تعديل العنوان والوصف */
    .offers-title {
        font-size: 1.5rem !important;
        margin-bottom: 10px !important;
    }
    
    .offer-subtitle {
        font-size: 0.9rem !important;
        margin-bottom: 20px !important;
    }

    /* جعل المؤقت أصغر */
    .offer-timer {
        padding: 10px !important;
        margin-bottom: 20px !important;
    }
    
    .timer-item {
        min-width: 50px !important;
        padding: 5px !important;
    }
    
    .timer-value {
        font-size: 1.2rem !important;
    }
    
    .timer-label {
        font-size: 0.7rem !important;
    }

    /* جعل المنتجات في سطر واحد مع تمرير أفقي */
    .offer-products {
        display: flex !important;
        flex-wrap: nowrap !important;
        overflow-x: auto !important;
        scroll-snap-type: x mandatory !important;
        gap: 10px !important;
        padding-bottom: 15px !important;
        margin: 0 -15px !important;
    }
    
    .offer-products .col-md-4 {
        flex: 0 0 85% !important;
        max-width: 85% !important;
        scroll-snap-align: start !important;
    }

    /* تعديل حجم بطاقات المنتجات */
    .offer-product {
        height: auto !important;
    }
    
    .offer-product .carousel {
        height: auto !important;
    }
    
    .offer-product-title {
        font-size: 0.9rem !important;
    }
    
    .offer-product-price {
        font-size: 1.1rem !important;
    }
    
    .offer-product-old-price {
        font-size: 0.8rem !important;
    }
    
    .offer-btn {
        padding: 5px 15px !important;
        font-size: 0.8rem !important;
    }
}

/* تأثيرات حركية (أضفها في القسم العام) */
.offer-product {
    transition: all 0.3s ease;
    transform: scale(0.98);
}

.offer-product:hover {
    transform: scale(1.02);
    box-shadow: 0 10px 20px rgba(0,0,0,0.15) !important;
}

/* تأثير التمرير السلس */
.offer-products {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
}

/* أنماط محسنة لزر السلة */
.cart-icon-container {
    position: fixed;
    top: 80px;
    left: 20px;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.cart-btn {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--primary);
    color: white;
    border: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
    text-decoration: none;
    position: relative;
    margin-left: 1vh;
    top: 2vh;
}

.cart-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
    background-color: var(--primary-dark);
}

.cart-btn i {
    font-size: 1.5rem;
}

#cartCount {
    position: absolute;
    top: -5px;
    right: -5px;
    background-color: var(--danger);
    color: white;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    font-weight: bold;
    border: 2px solid white;
    animation: pulse 1.5s infinite;
}

.cart-label {
    margin-top: 8px;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--dark);
    background: rgba(255, 255, 255, 0.9);
    padding: 4px 8px;
    border-radius: 12px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

/* تأثير النبض للعداد */
@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

/* تحسينات للشاشات الصغيرة */
@media (max-width: 768px) {
    .cart-icon-container {
        top: 70px;
        left: 15px;
    }
    
    .cart-btn {
        width: 50px;
        height: 50px;
    }
    
    .cart-btn i {
        font-size: 1.3rem;
    }
    
    #cartCount {
        width: 20px;
        height: 20px;
        font-size: 0.7rem;
    }
    
    .cart-label {
        font-size: 0.8rem;
        padding: 3px 6px;
    }
}

/* تحسينات للشاشات الصغيرة جدًا */
@media (max-width: 576px) {
    .cart-icon-container {
        top: 65px;
        left: 10px;
    }
    
    .cart-btn {
        width: 45px;
        height: 45px;
    }
    
    .cart-btn i {
        font-size: 1.2rem;
    }
    
    #cartCount {
        width: 18px;
        height: 18px;
        font-size: 0.65rem;
        top: -3px;
        right: -3px;
    }
    
    .cart-label {
        display: none; /* إخفاء النص على الشاشات الصغيرة جدًا */
    }
}

/* منع التداخل مع زر القائمة على الجوال */
@media (max-width: 991px) {
    .navbar-toggler {
        z-index: 1001; /* تأكد من أن زر القائمة فوق زر السلة */
    }
}

/* ============== أنماط سلة المشتريات ============== */
.offcanvas {
    font-family: 'Tajawal', sans-serif;
    transition: transform 0.3s ease-in-out;
}

.offcanvas-header {
    background-color: var(--primary);
    color: white;
    padding: 1rem 1.5rem;
    border-bottom: 2px solid var(--primary-dark);
}

.offcanvas-title {
    font-weight: 700;
    font-size: 1.3rem;
}

.offcanvas-body {
    padding: 0;
    display: flex;
    flex-direction: column;
    background-color: #f8f9fa;
}

#cartItems {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
}

.cart-item {
    background: white;
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 15px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    border: 1px solid #eee;
}

.cart-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
}

.cart-item-img {
    width: 80px;
    height: 80px;
    object-fit: contain;
    border-radius: 8px;
    background-color: #f8f8f8;
    padding: 5px;
}

.cart-item-details {
    flex: 1;
}

.cart-item-title {
    font-weight: 600;
    margin-bottom: 5px;
    color: var(--dark);
    font-size: 0.95rem;
}

.cart-item-price {
    color: var(--primary);
    font-weight: 700;
    margin-bottom: 10px;
    font-size: 1rem;
}

.quantity-controls {
    display: flex;
    align-items: center;
    gap: 8px;
}

.quantity-btn {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    border: 1px solid #ddd;
    background: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    transition: all 0.2s;
}

.quantity-btn:hover {
    background-color: var(--primary);
    color: white;
    border-color: var(--primary);
}

.quantity-input {
    width: 40px;
    text-align: center;
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 5px;
    font-weight: 600;
}

.remove-item {
    background: none;
    border: none;
    color: #dc3545;
    font-size: 1.1rem;
    padding: 5px;
    border-radius: 5px;
    transition: all 0.2s;
}

.remove-item:hover {
    background-color: rgba(220, 53, 69, 0.1);
    transform: scale(1.1);
}

.cart-summary {
    background: white;
    padding: 1.5rem;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
    border-top: 2px solid #eee;
}

.cart-summary .d-flex {
    font-size: 1.1rem;
    margin-bottom: 1rem;
}

.cart-summary span:last-child {
    font-weight: 800;
    color: var(--primary);
    font-size: 1.2rem;
}

#checkoutBtn:disabled {
    background-color: #ccc;
    border-color: #ccc;
    cursor: not-allowed;
}

#checkoutBtn:not(:disabled):hover {
    background-color: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(255, 107, 53, 0.3);
}

/* رسالة السلة الفارغة */
#emptyCartMessage {
    color: var(--gray);
    padding: 3rem 1rem;
}

#emptyCartMessage i {
    color: #ddd;
    font-size: 4rem;
}

/* تحسينات للجوال */
@media (max-width: 768px) {
    .offcanvas {
        width: 85% !important;
    }
    
    .cart-item {
        padding: 12px;
    }
    
    .cart-item-img {
        width: 70px;
        height: 70px;
    }
    
    .cart-item-title {
        font-size: 0.9rem;
    }
    
    .quantity-btn {
        width: 28px;
        height: 28px;
    }
    
    .quantity-input {
        width: 35px;
    }
}

/* تأثيرات للعناصر عند الإضافة */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(30px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.cart-item {
    animation: slideIn 0.3s ease-out;
}

.slideshow-container1 { 
    position: relative; 
    max-width: 1000px; 
    margin: auto; 
    overflow: hidden;
    margin-top: 5px; 
}

.mySlides1 { 
    display: none; 
}

.fade1 { 
    animation: fade1 1.5s; 
}

@keyframes fade1 { 
    from {opacity: .4} 
    to {opacity: 1} 
}

.prev1, .next1 {
    cursor: pointer; 
    position: absolute; 
    top: 50%; 
    transform: translateY(-50%);
    padding: 16px; 
    color: white; 
    background: rgba(0,0,0,0.5); 
    font-size: 18px; 
    border-radius: 3px;
}

.prev1, .next1 { 
    z-index: 10;
}

.prev1 { 
    left: 0; 
}

.next1 { 
    right: 0; 
}

.dot1 {
    cursor: pointer; 
    height: 3px; 
    width: 15px; 
    margin: 0 0px;
    background: #bbb; 
    border-radius: 50%; 
    display: inline-block;
}

.active1, .dot1:hover { 
    background: #717171; 
}

.slideshow-container1 img {
    width: 100%;         /* تاخذ كامل عرض الحاوية */
    height: auto;        /* تحافظ على النسبة */
    object-fit: contain; /* أو cover حسب اللي يعجبك */
    display: block;      /* تشيل الفراغات تحت الصورة */
}
/* ============== أنماط سلة المشتريات ============== */
.offcanvas {
    font-family: 'Tajawal', sans-serif;
    transition: transform 0.3s ease-in-out;
}

[data-theme="dark"] .offcanvas {
    background: var(--light) !important;
}

.offcanvas-header {
    background-color: var(--primary);
    color: white;
    padding: 1rem 1.5rem;
    border-bottom: 2px solid var(--primary-dark);
}

[data-theme="dark"] .offcanvas-header {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
}

.offcanvas-title {
    font-weight: 700;
    font-size: 1.3rem;
}

.offcanvas-body {
    padding: 0;
    display: flex;
    flex-direction: column;
    background-color: #f8f9fa;
}

[data-theme="dark"] .offcanvas-body {
    background-color: var(--light) !important;
}

#cartItems {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
}

.cart-item {
    background: white;
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 15px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    border: 1px solid #eee;
}

[data-theme="dark"] .cart-item {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

.cart-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
}

[data-theme="dark"] .cart-item:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.cart-item-img {
    width: 80px;
    height: 80px;
    object-fit: contain;
    border-radius: 8px;
    background-color: #f8f8f8;
    padding: 5px;
}

[data-theme="dark"] .cart-item-img {
    background-color: rgba(255, 255, 255, 0.05);
}

.cart-item-details {
    flex: 1;
}

.cart-item-title {
    font-weight: 600;
    margin-bottom: 5px;
    color: var(--dark);
    font-size: 0.95rem;
}

[data-theme="dark"] .cart-item-title {
    color: var(--dark);
}

.cart-item-price {
    color: var(--primary);
    font-weight: 700;
    margin-bottom: 10px;
    font-size: 1rem;
}

[data-theme="dark"] .cart-item-price {
    color: var(--primary);
}

.quantity-controls {
    display: flex;
    align-items: center;
    gap: 8px;
}

.quantity-btn {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    border: 1px solid #ddd;
    background: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    transition: all 0.2s;
}

[data-theme="dark"] .quantity-btn {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
    color: var(--dark);
}

.quantity-btn:hover {
    background-color: var(--primary);
    color: white;
    border-color: var(--primary);
}

[data-theme="dark"] .quantity-btn:hover {
    background-color: var(--primary);
    color: white;
    border-color: var(--primary);
}

.quantity-input {
    width: 40px;
    text-align: center;
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 5px;
    font-weight: 600;
}

[data-theme="dark"] .quantity-input {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
    color: var(--dark);
}

.remove-item {
    background: none;
    border: none;
    color: #dc3545;
    font-size: 1.1rem;
    padding: 5px;
    border-radius: 5px;
    transition: all 0.2s;
}

.remove-item:hover {
    background-color: rgba(220, 53, 69, 0.1);
    transform: scale(1.1);
}

[data-theme="dark"] .remove-item:hover {
    background-color: rgba(220, 53, 69, 0.2);
}

.cart-summary {
    background: white;
    padding: 1.5rem;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
    border-top: 2px solid #eee;
}

[data-theme="dark"] .cart-summary {
    background: rgba(255, 255, 255, 0.05);
    border-top: 1px solid var(--border-color);
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
}

.cart-summary .d-flex {
    font-size: 1.1rem;
    margin-bottom: 1rem;
}

[data-theme="dark"] .cart-summary .d-flex {
    color: var(--dark);
}

.cart-summary span:last-child {
    font-weight: 800;
    color: var(--primary);
    font-size: 1.2rem;
}

[data-theme="dark"] .cart-summary span:last-child {
    color: var(--primary);
}

#checkoutBtn:disabled {
    background-color: #ccc;
    border-color: #ccc;
    cursor: not-allowed;
}

#checkoutBtn:not(:disabled):hover {
    background-color: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(255, 107, 53, 0.3);
}

[data-theme="dark"] #checkoutBtn:not(:disabled):hover {
    box-shadow: 0 4px 8px rgba(255, 107, 53, 0.4);
}

/* رسالة السلة الفارغة */
#emptyCartMessage {
    color: var(--gray);
    padding: 3rem 1rem;
}

[data-theme="dark"] #emptyCartMessage {
    color: var(--gray);
}

#emptyCartMessage i {
    color: #ddd;
    font-size: 4rem;
}

[data-theme="dark"] #emptyCartMessage i {
    color: rgba(255, 255, 255, 0.2);
}

/* تحسينات للجوال */
@media (max-width: 768px) {
    .offcanvas {
        width: 85% !important;
    }
    
    .cart-item {
        padding: 12px;
    }
    
    .cart-item-img {
        width: 70px;
        height: 70px;
    }
    
    .cart-item-title {
        font-size: 0.9rem;
    }
    
    .quantity-btn {
        width: 28px;
        height: 28px;
    }
    
    .quantity-input {
        width: 35px;
    }
}

/* تأثيرات للعناصر عند الإضافة */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(30px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.cart-item {
    animation: slideIn 0.3s ease-out;
}
/* إزالة أنماط التبديل بين اللغات السابقة */
/* ============== تحسينات نموذج الطلب للهواتف ============== */
@media (max-width: 768px) {
    /* تعديل حجم النافذة للهواتف */
    #orderModal .modal-dialog {
        margin: 0.5rem;
        max-width: 100%;
        height: 100vh;
    }
    
    #orderModal .modal-content {
        border-radius: 12px;
        overflow: hidden;
        height: 100%;
        max-height: 90vh;
        display: flex;
        flex-direction: column;
    }
    
    /* تصغير الهيدر */
    #orderModal .modal-header {
        padding: 0.8rem 1rem;
    }
    
    #orderModal .modal-header h5 {
        font-size: 1.1rem;
        font-weight: 600;
    }
    
    /* تقليل المسافات في الجسم */
    #orderModal .modal-body {
        padding: 1rem;
        flex: 1;
        overflow-y: auto;
        scrollbar-width: thin;
    }
    
    /* تحسين ملخص الطلب */
    #orderModal .order-summary {
        padding: 0.8rem;
        margin-bottom: 1rem;
        border-radius: 8px;
    }
    
    #orderModal .order-summary h6 {
        font-size: 0.9rem;
        margin-bottom: 0.8rem;
    }
    
    #orderModal .product-image-thumb {
        width: 50px !important;
        height: 50px !important;
    }
    
    #orderModal #productNameDisplay {
        font-size: 0.9rem;
        margin-bottom: 0.3rem;
    }
    
    #orderModal #productPrice {
        font-size: 0.85rem;
    }
    
    /* تقليل المسافات بين الحقول */
    #orderModal .row {
        margin-bottom: 0.3rem !important;
    }
    
    #orderModal .mb-3 {
        margin-bottom: 0.8rem !important;
    }
    
    #orderModal .mb-4 {
        margin-bottom: 1rem !important;
    }
    
    /* تصغير تسميات الحقول */
    #orderModal .form-label {
        font-size: 0.85rem;
        margin-bottom: 0.3rem;
        font-weight: 500;
    }
    
    /* تقليل ارتفاع حقول الإدخال */
    #orderModal .form-control,
    #orderModal .form-select {
        padding: 0.5rem 0.75rem;
        font-size: 0.9rem;
        border-radius: 6px;
        min-height: 42px;
    }
    
    /* تقليل حجم النص المساعد */
    #orderModal .text-muted {
        font-size: 0.75rem;
    }
    
    /* تحسين أزرار الدفع */
    #orderModal .form-check {
        margin-bottom: 0.5rem;
    }
    
    #orderModal .form-check-label {
        font-size: 0.85rem;
    }
    
    /* تصغير الفوتر */
    #orderModal .modal-footer {
        padding: 0.8rem;
        border-top: 1px solid var(--border-color);
        background: var(--light);
    }
    
    #orderModal .modal-footer .btn {
        padding: 0.6rem 1rem;
        font-size: 0.9rem;
    }
    
    /* تلميح للتمرير */
    #orderModal .modal-body::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 30px;
        background: linear-gradient(to top, var(--light), transparent);
        pointer-events: none;
    }
}

@media (max-width: 576px) {
    /* تحسينات إضافية للشاشات الصغيرة جداً */
    #orderModal .modal-body {
        padding: 0.8rem;
    }
    
    #orderModal .form-control,
    #orderModal .form-select {
        min-height: 38px;
        font-size: 0.85rem;
    }
    
    #orderModal .btn {
        font-size: 0.85rem;
        padding: 0.5rem 0.8rem;
    }
    
    /* جعل الأعمدة تأخذ العرض الكامل */
    #orderModal .row .col-md-6 {
        flex: 0 0 100%;
        max-width: 100%;
    }
    
    /* تقليل المسافات بين الأعمدة */
    #orderModal .row {
        margin-left: -0.25rem;
        margin-right: -0.25rem;
    }
    
    #orderModal .row > [class*="col-"] {
        padding-left: 0.25rem;
        padding-right: 0.25rem;
    }
}

/* ============== تحسينات الوصول للهواتف ============== */
/* تحسين قائمة الخيارات على iOS */
@media (max-width: 768px) {
    #orderModal select.form-select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23333' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right 0.75rem center;
        background-size: 16px 12px;
        padding-right: 2rem;
    }
    
    [data-theme="dark"] #orderModal select.form-select {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23f5f5f5' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");
    }
}

/* إخفاء شريط التمرير في بعض المتصفحات */
#orderModal .modal-body::-webkit-scrollbar {
    width: 5px;
}

[data-theme="dark"] #orderModal .modal-body::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
}

[data-theme="dark"] #orderModal .modal-body::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.15);
    border-radius: 3px;
}

/* تحسينات اللمس */
@media (max-width: 768px) {
    #orderModal .btn,
    #orderModal .form-check-input {
        min-height: 44px;
        min-width: 44px;
    }
    
    #orderModal .form-check-input {
        width: 20px;
        height: 20px;
        margin-top: 0.2rem;
    }
}

/* ============== تحسينات الرسائل والتأكيدات ============== */
/* رسائل التحقق على الهواتف */
@media (max-width: 768px) {
    #orderModal .is-invalid,
    #orderModal .is-valid {
        background-position: right 0.5rem center;
        background-size: 16px 16px;
        padding-right: 2.5rem;
    }
    
    #orderModal .invalid-feedback,
    #orderModal .valid-feedback {
        font-size: 0.75rem;
        margin-top: 0.25rem;
    }
}

/* ============== تحسينات إضافية للشاشات الصغيرة جداً ============== */
@media (max-width: 375px) {
    #orderModal .modal-header {
        padding: 0.6rem 0.8rem;
    }
    
    #orderModal .modal-body {
        padding: 0.6rem;
    }
    
    #orderModal .modal-footer {
        padding: 0.6rem;
    }
    
    #orderModal h5,
    #orderModal h6 {
        font-size: 0.95rem;
    }
    
    #orderModal .form-label {
        font-size: 0.8rem;
    }
    
    #orderModal .btn {
        padding: 0.4rem 0.6rem;
        font-size: 0.8rem;
    }
}

/* ============== تحسينات التخطيط العام ============== */
@media (max-width: 768px) {
    /* جعل النموذج يأخذ معظم الشاشة */
    #orderModal.modal {
        padding-left: 0 !important;
        padding-right: 0 !important;
    }
    
    /* إزالة الهامش الزائد */
    #orderModal .modal-dialog-centered {
        min-height: 100vh;
        margin: 0;
        display: flex;
        align-items: flex-end;
    }
    
    /* جعل النموذج يبدأ من الأسفل على الهواتف */
    #orderModal .modal-dialog {
        margin: 0;
        width: 100%;
        max-width: 100%;
        transform: translateY(100%);
        transition: transform 0.3s ease-out;
    }
    
    #orderModal.modal.show .modal-dialog {
        transform: translateY(0);
    }
}

/* ============== تحسينات الكيبورد على الهواتف ============== */
@media (max-width: 768px) {
    /* منع تكبير النص تلقائياً */
    #orderModal input[type="text"],
    #orderModal input[type="tel"],
    #orderModal input[type="email"],
    #orderModal select,
    #orderModal textarea {
        font-size: 16px !important; /* منع التكبير على iOS */
    }
    
    /* تحسين حقول الهاتف */
    #orderModal input[type="tel"] {
        direction: ltr;
        text-align: left;
    }
    
    /* تحسين textarea */
    #orderModal textarea {
        min-height: 80px;
        resize: vertical;
    }
}

/* ============== تحسينات التحميل على الهواتف ============== */
@media (max-width: 768px) {
    #orderModal .spinner-border {
        width: 1rem;
        height: 1rem;
        border-width: 0.15em;
    }
    
    #submitOrderBtn .spinner-border {
        margin-right: 0.3rem;
    }
}


/* حل مشكلة خيارات قائمة الولايات في وضع الدارك */
[data-theme="dark"] .form-select option {
    background-color: var(--light) !important;
    color: var(--dark) !important;
    padding: 10px !important;
    font-size: 0.95rem !important;
}
    [data-theme="dark"] .text-muted {
    color: #b0b0b0 !important;
    opacity: 0.9;
}

[data-theme="dark"] .card-text {
    color: var(--gray) !important;
}/* تحسينات للهواتف */
@media (max-width: 768px) {
    .product-card {
        margin-bottom: 15px;
    }
    
    .product-card .card-title {
        font-size: 0.9rem;
        height: auto;
        min-height: 40px;
    }
    
    .product-card .card-text {
        font-size: 0.8rem;
        height: auto;
        min-height: 40px;
    }
    
    .product-card .btn-orange {
        padding: 8px 12px;
        font-size: 0.8rem;
        min-height: 36px;
    }
    
    /* تحسين تجربة اللمس */
    .product-card {
        -webkit-tap-highlight-color: rgba(0,0,0,0.1);
        touch-action: manipulation;
    }
    
    .product-card:active {
        transform: scale(0.98);
        transition: transform 0.1s;
    }
}

/* تحسينات إضافية للشاشات الصغيرة جداً */
@media (max-width: 576px) {
    .product-card .card-body {
        padding: 12px;
    }
    
    .product-card .card-footer {
        padding: 12px;
    }
    
    .product-card .btn-orange {
        font-size: 0.75rem;
        padding: 6px 10px;
    }
}
</style>
</head><body><nav class="navbar navbar-expand-lg navbar-light fixed-top bg-white shadow-sm">
    <div class="container">
        <a class="navbar-brand" href="#">
            <img src="https://i.postimg.cc/7P7BK44r/f525e1dd-9f2c-4160-aed1-882a8b28b75c-20250703-131500-0000.png" 
                 alt="Robuste Logo" class="d-inline-block align-top" 
                 style="width: 180px; height: auto; max-height: 50px; object-fit:fill;">
            <span class="d-none d-lg-inline fw-bold fs-4 ms-2" style="color: #FF6B35;">ROBUSTE eulma</span>
        </a>
       
        <!-- زر دارك مود محترف -->
        <div class="d-flex align-items-center me-3">
            <button class="theme-toggle" id="themeToggle" title="تبديل وضع الظلام">
                <i class="bi bi-moon"></i>
            </button>
        </div>
        
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item mx-2"><a class="nav-link active" href="#">الرئيسية</a></li>
                <li class="nav-item"><a class="nav-link" href="#products">المنتجات</a></li>
                <li class="nav-item"><a class="nav-link" href="#reviews">آراء العملاء</a></li>
                <li class="nav-item"><a class="nav-link" href="#contact">اتصل بنا</a></li>
            </ul>
        </div>
        
        <!-- أيقونة السلة مع عداد -->
        <div class="cart-icon-container ms-lg-4">
            <span class="cart-label d-none d-lg-inline">panier</span>
            <a href="#" class="cart-btn position-relative" onclick="toggleCart(); return false;">
                <i class="bi bi-cart3"></i>
                <span class="position-absolute badge rounded-pill bg-danger" id="cartCount">0</span>
            </a>
        </div>
    </div>
</nav><div class="status-indicator" id="statusIndicator" style="display: none;"><div class="alert alert-dismissible fade show" role="alert"><span id="statusMessage"></span> <button type="button" class="btn-close" onclick="hideStatus()"></button></div></div>
  

<!-- بهذا الجزء المعدل -->
<section class="hero-container position-relative">
    <div class="hero-image-container">
        <img   width="3780" height="1890" src="images/banner.webp" alt="أجهزة منزلية" class="hero-image">
        <div class="image-overlay"></div>
    </div>
    <div class="hero-content container text-center position-absolute top-50 start-50 translate-middle">
        <h1 class="hero-title">Des appareils ménagers qui simplifient votre vie</h1>
        <p class="hero-subtitle">Haute qualité à des prix adaptés à chaque foyer algérien avec service de livraison rapide et garantie de 2 ans</p>
        <div>
            <a href="#products" class="btn btn-orange btn-lg px-4 me-2"><i class="bi bi-cart"></i> Acheter maintenant </a>
            <a href="#contact" class="btn btn-outline-light btn-lg px-4"><i class="bi bi-headset"></i> Contactez-nous</a>
        </div>
    </div>
</section>

   <!-- HTML -->
<div class="slideshow-container1">
  <div class="mySlides1 fade1">
    <img src="images/signal-2025-08-21-103443_002.webp" style="width:100%">
  </div>
  <div class="mySlides1 fade1">
    <img src="images/signal-2025-08-21-103443_003.webp" style="width:100%">
  </div>
  <div class="mySlides1 fade1">
    <img src="images/signal-2025-08-21-103443_004.webp" style="width:100%">
  </div>
  <div class="mySlides1 fade1">
    <img src="images/signal-2025-08-21-103443_005.webp" style="width:100%">
  </div>
  <div class="mySlides1 fade1">
    <img src="images/4_20250820_152310_0003.webp" style="width:100%">
  </div>
  <a class="prev1" onclick="plusSlides1(-1)">&#10094;</a>
  <a class="next1" onclick="plusSlides1(1)">&#10095;</a>

</div>
  
<br>
<div style="text-align:center">
  <span class="dot1" onclick="currentSlide1(1)"></span>
  <span class="dot1" onclick="currentSlide1(2)"></span>
  <span class="dot1" onclick="currentSlide1(3)"></span>
  <span class="dot1" onclick="currentSlide1(4)"></span>
</div>
    
   <section class="offers-section">
  <div class="container position-relative">
    <h2 class="offers-title">Offres spéciales</h2>
    <p class="offer-subtitle">Profitez de nos offres exceptionnelles sur les meilleurs appareils électriques avec des remises allant jusqu'à 20% pour une durée limitée</p>

    <!-- تايمر -->
    <div class="offer-timer">
      <div class="timer-title">L'offre se termine dans:</div>
      <div class="timer-content">
        <div class="timer-item">
          <div class="timer-value" id="days">03</div>
          <div class="timer-label">jours</div>
        </div>
        <div class="timer-item">
          <div class="timer-value" id="hours">12</div>
          <div class="timer-label">heures</div>
        </div>
        <div class="timer-item">
          <div class="timer-value" id="minutes">45</div>
          <div class="timer-label">minutes</div>
        </div>
        <div class="timer-item">
          <div class="timer-value" id="seconds">30</div>
          <div class="timer-label">secondes</div>
        </div>
      </div>
    </div>

    <!-- Produits -->
    <div class="row offer-products">

      <!-- المنتج 1 -->
      <div class="col-md-4">
        <div class="offer-product">
          <div class="offer-product-discount">Quantité limitée</div>
          <div class="offer-product-badge">Le plus demandé</div>

          <div id="carousel-offer-1" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
              <button type="button" data-bs-target="#carousel-offer-1" data-bs-slide-to="0" class="active"></button>
              <button type="button" data-bs-target="#carousel-offer-1" data-bs-slide-to="1"></button>
              <button type="button" data-bs-target="#carousel-offer-1" data-bs-slide-to="2"></button>
            </div>

            <div class="carousel-inner">
              <div class="carousel-item active">
                 <img src="images/Robuste Defroisseur 1.jpg" class="d-block w-100" alt="Defroisseur" height="800" width="800">
              </div>
              <div class="carousel-item">
                <img loading="lazy" src="images/Robuste Defroisseur 2.jpg" class="d-block w-100"  alt="Defroisseur" height="800" width="800">
              </div>
              <div class="carousel-item">
                <img loading="lazy" src="images/Robuste Defroisseur.jpg" class="d-block w-100"  alt="Defroisseur"height="800" width="800" >
              </div>
            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#carousel-offer-1" data-bs-slide="prev">
              <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carousel-offer-1" data-bs-slide="next">
              <span class="carousel-control-next-icon"></span>
            </button>
          </div>

          <h4 class="offer-product-title">Defroisseur Vapeur</h4>
          <div class="offer-product-price">6500 د.ج</div>
          <div class="offer-product-old-price">7000 د.ج</div>
          <a href="product.html?pid=100" class="offer-btn" style="display: block; text-decoration: none; text-align: center; color: inherit;">
    Voir le produit
</a>
        </div>
      </div>

      <!-- المنتج 2 -->
      <div class="col-md-4">
        <div class="offer-product">
          <div class="offer-product-discount">خصم 10%</div>

          <div id="carousel-offer-2" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
              <button type="button" data-bs-target="#carousel-offer-2" data-bs-slide-to="0" class="active"></button>
              <button type="button" data-bs-target="#carousel-offer-2" data-bs-slide-to="1"></button>
            </div>

            <div class="carousel-inner">
               <div class="carousel-item active">
                <img loading="lazy" src="images/aspirateur a main 1.jpg" class="d-block w-100" alt="ASPIRATEUR SOUFFLEUR A MAIN 1" height="800" width="800">
              </div>
              <div class="carousel-item">
                <img  sloading="lazy" src="images/aspirateur a main 2.jpg" class="d-block w-100" alt="ASPIRATEUR SOUFFLEUR A MAIN 2"   height="800" width="800"  >
              </div>
            
            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#carousel-offer-2" data-bs-slide="prev">
              <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carousel-offer-2" data-bs-slide="next">
              <span class="carousel-control-next-icon"></span>
            </button>
          </div>

          <h4 class="offer-product-title">ASPIRATEUR SOUFFLEUR A MAIN</h4>
          <div class="offer-product-price">5000 د.ج</div>
          <div class="offer-product-old-price">5600 د.ج</div>
          <a href="product.html?pid=101" class="offer-btn" style="display: block; text-decoration: none; text-align: center; color: inherit;">
    Voir le produit
</a>
        </div>
      </div>

      <!-- المنتج 3 -->
      <div class="col-md-4">
        <div class="offer-product">
          <div class="offer-product-discount">خصم 20%</div>
          <div class="offer-product-badge">Nouveau</div>

          <div id="carousel-offer-3" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
              <button type="button" data-bs-target="#carousel-offer-3" data-bs-slide-to="0" class="active"></button>
              <button type="button" data-bs-target="#carousel-offer-3" data-bs-slide-to="1"></button>
            </div>

            <div class="carousel-inner">
              
               <div class="carousel-item active">
                <img loading="lazy" src="images/NETTOYEUR DE TACHES 4 EN 1.jpg" class="d-block w-100" alt="صورة المنتج 2"height="800" width="800" >
              </div>
              <div class="carousel-item">
                <img loading="lazy" src="images/NETTOYEUR DE TACHES 4 EN 1 robuste.jpg" class="d-block w-100" alt="صورة المنتج 3" height="800" width="800" >
              </div>
            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#carousel-offer-3" data-bs-slide="prev">
              <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carousel-offer-3" data-bs-slide="next">
              <span class="carousel-control-next-icon"></span>
            </button>
          </div>

          <h4 class="offer-product-title">NETTOYEUR DE TACHES 4 EN 1</h4>
          <div class="offer-product-price">23,500 د.ج</div>
          <div class="offer-product-old-price">25,000 د.ج</div>
          <a href="product.html?pid=102" class="offer-btn" style="display: block; text-decoration: none; text-align: center; color: inherit;">
    Voir le produit
</a>
        </div>
      </div>

    </div>
  </div>
</section>    
                            <section id="products" class="py-5">
    <div class="container">


        <h2 class="section-title">أحدث Produits</h2>
        
        <!-- أضف هذا الجزء الNouveau هنا -->
        <div class="categories-filter mb-5">
            <div class="d-flex flex-wrap justify-content-center gap-2">
                <button class="btn btn-outline-primary category-btn active" data-category="all">Tous</button>
                <button class="btn btn-outline-primary category-btn" data-category="coiffure">Soins capillaires</button>
                <button class="btn btn-outline-primary category-btn" data-category="cuisine">Appareils de cuisine</button>
                <button class="btn btn-outline-primary category-btn" data-category="beauté">Soins personnels</button>
                <button class="btn btn-outline-primary category-btn" data-category="maison">Électroménager</button>
                <button class="btn btn-outline-primary category-btn" data-category="jardin">Jardin</button>
                <button class="btn btn-outline-primary category-btn" data-category="café">Machines à café</button>
            </div>
        </div>
        <!-- نهاية الجزء الNouveau -->
        
        <div class="row" id="productsContainer"></div>
    </div>
    

</section>
                            <div class="row" id="productsContainer"></div></div></section><section id="reviews" class="py-5 bg-light"><div class="container"><h2 class="section-title">Avis clients</h2><div class="row"><div class="col-md-4 mb-4"><div class="review-card"><div class="d-flex"><img src="https://api.dicebear.com/7.x/initials/svg?seed=Ahmed%20Ben" class="rounded-circle me-3" width="60" height="60" alt="عميل"><div><h5 class="mb-0">عمر</h5><div class="text-warning"><i class="bi bi-star-fill"></i> <i class="bi bi-star-fill"></i> <i class="bi bi-star-fill"></i> <i class="bi bi-star-fill"></i> <i class="bi bi-star-fill"></i></div></div></div><p class="mt-3">"جودة المنتج ممتازة والتوصيل كان في الوقت المحدد، شكراً لفريق Robuste!"</p></div></div><div class="col-md-4 mb-4"><div class="review-card"><div class="d-flex"><img src="https://api.dicebear.com/7.x/initials/svg?seed=Rhmed%20Bn" class="rounded-circle me-3" width="60" height="60" alt="عميل"><div><h5 class="mb-0">Rose Blanch</h5><div class="text-warning"><i class="bi bi-star-fill"></i> <i class="bi bi-star-fill"></i> <i class="bi bi-star-fill"></i> <i class="bi bi-star-fill"></i> <i class="bi bi-star-half"></i></div></div></div><p class="mt-3">"Je suis ravie de la marque Robuste, j'utilise vos produits depuis pas mal d'années."</p></div></div><div class="col-md-4 mb-4"><div class="review-card"><div class="d-flex"><img src="https://api.dicebear.com/7.x/initials/svg?seed=Ahmed%20Hen" class="rounded-circle me-3" width="60" height="60" alt="عميل"><div><h5 class="mb-0">محمد</h5><div class="text-warning"><i class="bi bi-star-fill"></i> <i class="bi bi-star-fill"></i> <i class="bi bi-star-fill"></i> <i class="bi bi-star-fill"></i> <i class="bi bi-star-fill"></i></div></div></div><p class="mt-3">"الدفع عند الاستلام مريح جداً، والمنتج يعمل بكفاءة عالية، أنصح بالتعامل معهم."</p></div></div></div></div></section><div class="modal fade" id="orderModal" tabindex="-1" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">طلب منتج</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><div class="order-summary mb-4"><h6 class="mb-3">ملخص الطلب</h6><div class="d-flex align-items-center"><img id="productImage" class="product-image-thumb me-3" src="" alt="صورة المنتج"><div><h5 id="productNameDisplay" class="mb-1"></h5><p id="productPrice" class="mb-0 text-primary fw-bold"></p></div></div></div><form id="orderForm"><input type="hidden" id="productName"> <input type="hidden" id="productPriceValue"> <input type="hidden" id="productImageUrl"><div class="row"><div class="col-md-6 mb-3"><label for="fullName" class="form-label">nom et prénom<span class="text-danger">*</span></label> <input type="text" class="form-control" id="fullName" required></div><div class="col-md-6 mb-3"><label for="phone" class="form-label">Numéro de téléphone <span class="text-danger">*</span></label> <input type="tel" class="form-control" id="phone" pattern="[0]{1}[5-7]{1}[0-9]{8}" required> <small class="text-muted">EX: 0551234566</small></div></div><div class="row"><div class="col-md-6 mb-3"><label for="اختياري" class="form-label"> اختياري email</label> <input type="email" class="form-control" id="email"></div><div class="col-md-6 mb-3"><label for="wilaya" class="form-label">الولاية <span class="text-danger">*</span></label> <select class="form-select" id="wilaya" required><option value="">Choisissez votre état</option></select></div></div><div class="mb-3"><label for="address" class="form-label">Adresse </label> <textarea class="form-control" id="address" rows="2"></textarea></div><div class="row"><div class="col-md-6 mb-3">
                                </div><div class="col-md-6 mb-3"><label class="form-label">طريقة الدفع</label><div class="form-check"><input class="form-check-input" type="radio" name="paymentMethod" id="cashOnDelivery" value="الدفع عند الاستلام" checked="checked"> <label class="form-check-label" for="cashOnDelivery">الدفع عند الاستلام</label></div><div class="form-check"><input class="form-check-input" type="radio" name="paymentMethod" id="onlinePayment" value="الدفع الإلكتروني"> <label class="form-check-label" for="onlinePayment">الدفع الإلكتروني</label></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button> <button type="button" class="btn btn-orange" id="submitOrderBtn" onclick="submitOrder()">Confirmer la commande</button></div></div></div></div><section id="contact" class="py-5"><div class="container"><h2 class="section-title">Contactez-nous</h2><div class="row"><div class="col-md-6 mb-4"><div class="contact-card h-100"><h4 class="mb-4">Coordonnées</h4><div class="d-flex mb-3"><div class="me-3 text-primary"><i class="bi bi-geo-alt fs-4"></i></div><div><h5>Adresse</h5><p class="mb-0">شارع بورقعة المنور، 426 قطعة، العلمة، سطيف، الجزائر</p></div></div><div class="d-flex mb-3"><div class="me-3 text-primary"><i class="bi bi-telephone fs-4"></i></div><div><h5>Téléphone</h5><p class="mb-0">0656360457</p></div></div><div class="d-flex mb-3"><div class="me-3 text-primary"><i class="bi bi-envelope fs-4"></i></div><div><h5>E-mail</h5><p class="mb-0">laidaouih@gmail.com</p></div></div><div class="d-flex"><div class="me-3 text-primary"><i class="bi bi-clock fs-4"></i></div><div><h5>Heures d'ouverture</h5><p class="mb-0">Tous les jours de 7h00 à 16h00</p></div></div><div class="mt-4"><h5>Suivez-nous sur</h5><div class="d-flex mt-3"><a href="https://www.facebook.com/share/19QooaXfy8/" class="social-icon"><i class="bi bi-facebook"></i> </a></i></a></div></div></div></div><div class="col-md-6 mb-4"><div class="contact-card h-100"><h4 class="mb-4">Envoyez-nous un message</h4><form id="contactForm"><div class="mb-3"><label for="contactName" class="form-label">Votre nom <span class="text-danger">*</span></label> <input type="text" class="form-control" id="contactName" required></div><div class="mb-3"><label for="contactEmail" class="form-label">Votre e-mail <span class="text-danger">*</span></label> <input type="email" class="form-control" id="contactEmail" required></div><div class="mb-3"><label for="contactPhone" class="form-label">Numéro de téléphone</label> <input type="tel" class="form-control" id="contactPhone"></div><div class="mb-3"><label for="contactMessage" class="form-label">Votre message <span class="text-danger">*</span></label> <textarea class="form-control" id="contactMessage" rows="4" required></textarea></div><button type="submit" class="btn btn-orange w-100"><span id="contactSubmitText">Envoyer le message</span> <span id="contactSpinner" class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span></button></form></div></div></div><div class="row mt-4"><div class="col-12">
                                    <div class="contact-card" style="cursor: pointer;">
  <h4 class="mb-4">Emplacement du magasin</h4>
  
  <!-- نلف الخريطة داخل رابط -->
  <a href="https://maps.app.goo.gl/Cpk1L8fAadgE9pB76" target="_blank" style="display: block; text-decoration: none;">
    <div class="map-container" style="position: relative; width: 100%; height: 300px;">
      <iframe 
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3190.123456789012!2d5.7129892!3d36.1524645!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x12f2d5f1a5a5a5a5%3A0x12f2d5f1a5a5a5a5!2sROBUSTE%20EL%20EULMA!5e0!3m2!1sen!2sdz!4v1621234567890!5m2!1sen!2sdz" 
        width="100%" 
        height="100%" 
        style="border:0; border-radius: 8px; pointer-events: none;" 
        allowfullscreen="" 
        loading="lazy" 
        referrerpolicy="no-referrer-when-downgrade" 
        title="موقع متجر ROBUSTE EL EULMA">
      </iframe>
    </div>
  </a>
</div></iframe>
                                    </div></div></div></div></div></section><footer class="py-5 bg-dark text-white"><div class="container"><div class="row"><div class="col-lg-4 mb-4"><h5 class="mb-3">À propos de ROBUSTE</h5><p>Magasin spécialisé dans l'électroménager de haute qualité à prix compétitifs. Nous proposons les meilleurs produits et une livraison rapide.</p></p><div class="mt-3"><a href="https://www.facebook.com/share/19QooaXfy8/" class="social-icon"><i class="bi bi-facebook"></i> </a><a href="https://www.facebook.com/share/19QooaXfy8/" class="social-icon"></a></div></div><div class="col-lg-2 col-md-4 mb-4"><h5 class="mb-3">Liens rapides</h5><ul class="list-unstyled"><li class="mb-2"><a href="#" class="text-white text-decoration-none">Accueil</a></li><li class="mb-2"><a href="#products" class="text-white text-decoration-none">Produits</a></li><li class="mb-2"><a href="#reviews" class="text-white text-decoration-none">آراء العملاء</a></li><li class="mb-2"><a href="#contact" class="text-white text-decoration-none">Contactez-nous</a></li></ul></div><div class="col-lg-3 col-md-4 mb-4"><h5 class="mb-3">Service client</h5><ul class="list-unstyled"><li class="mb-2"><a href="#" class="text-white text-decoration-none">FAQ</a></li><li class="mb-2"><a href="#" class="text-white text-decoration-none">Modes de paiement</a></li><li class="mb-2"><a href="#" class="text-white text-decoration-none">Conditions de garantie</a></li></ul></div><div class="col-lg-3 col-md-4 mb-4"><div class="col-lg-3 col-md-4 mb-4"><h5 class="mb-3">Abonnez-vous à notre page</h5><p>Abonnez-vous pour recevoir les dernières offres</p><div class="mt-3"><a href="https://www.facebook.com/share/19QooaXfy8/" class="btn btn-orange w-100" target="_blank">S'abonner</a></div></div></div></div><hr class="my-4 bg-light"><div class="row"><div class="col-md-6 text-center text-md-start mb-3 mb-md-0"><p class="mb-0">&copy; 2025 ROBUSTE. Tous droits réservés.</p></div><div class="col-md-6 text-center text-md-end"><div class="d-flex flex-column flex-md-row align-items-center justify-content-md-end"><p class="mb-2 mb-md-0 me-md-3">Paiement par carte gold disponible</p><img src="https://i.postimg.cc/bY06X2YN/logo-round.png" alt="Modes de paiement" style="width: 30px; height: auto;"></div></div></div></div></footer><a href="https://wa.me/213656360457" class="whatsapp-btn" target="_blank"><i class="bi bi-whatsapp"></i></a><script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script><script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
                                    <script>// ============== تهيئة Firebase ==============
      
                                      // ============== تهيئة Firebase ==============
// ============== تهيئة Firebase ==============
      
// ============== تهيئة Firebase ==============
const firebaseConfig = {
    apiKey: "AIzaSyBTrnKCYOtfSSDYtmVQbzP2HcwgkLT565Y",
    authDomain: "robuste-c8e0f.firebaseapp.com",
    projectId: "robuste-c8e0f",
    storageBucket: "robuste-c8e0f.appspot.com",
    messagingSenderId: "975609984963",
    appId: "1:975609984963:web:a481efb493a88d7bc7af76",
    measurementId: "G-DWT7MZN028"
};

// تهيئة Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// تهيئة EmailJS
(function() {
    emailjs.init("k77vdaUWPpnLrfTnS");
})();

// قائمة الولايات الجزائرية
const wilayas = [
    "أدرار", "الشلف", "الأغواط", "أم البواقي", "باتنة", "بجاية", "بسكرة", "بشار", "البليدة",
    "البويرة", "تمنراست", "تبسة", "تلمسان", "تيارت", "تيزي وزو", "الجزائر", "الجلفة", "جيجل",
    "سطيف", "سعيدة", "سكيكدة", "سيدي بلعباس", "عنابة", "قالمة", "قسنطينة", "المدية", "مستغانم",
    "المسيلة", "معسكر", "ورقلة", "وهران", "البيض", "إليزي", "برج بوعريريج", "بومرداس", "الطارف",
    "تيندوف", "تيسمسيلت", "الوادي", "خنشلة", "سوق أهراس", "تيبازة", "ميلة", "عين الدفلى", "النعامة",
    "عين تموشنت", "غرداية", "غليزان"
];

// ============== المتغيرات العامة ==============
let orderModal = null;
let cart = [];

// ============== نظام المنتجات الديناميكي ==============

// دالة جلب وعرض المنتجات من JSON
async function loadAndDisplayProducts(category = 'all') {
    try {
        const response = await fetch('products.json');
        if (!response.ok) {
            throw new Error('Erreur lors du chargement des produits');
        }
        const products = await response.json();
        
        // تصفية المنتجات حسب الفئة
        const filteredProducts = category === 'all' 
            ? products 
            : products.filter(product => product.category === category);
        
        renderProducts(filteredProducts);
    } catch (error) {
        console.error('Erreur:', error);
        showStatus('Erreur lors du chargement des produits', 'error');
    }
}

// دالة عرض المنتجات
function renderProducts(products) {
    const container = document.getElementById('productsContainer');
    if (!container) return;
    
    container.innerHTML = '';
    
    if (products.length === 0) {
        container.innerHTML = '<div class="col-12 text-center text-muted py-5">Aucun produit trouvé</div>';
        return;
    }
    
    products.forEach(product => {
        const discountBadge = product.old_price && product.old_price > product.price ? `
            <div class="discount-badge">
                خصم ${Math.round(((product.old_price - product.price) / product.old_price) * 100)}%
            </div>
        ` : '';
        
        const oldPrice = product.old_price && product.old_price > product.price ? `
            <small dir="ltr" class="text-decoration-line-through text-muted me-2">${product.old_price.toLocaleString()} DA</small>
        ` : '';
        
        const productBadge = product.badge ? `
            <div class="product-badge">
                ${product.badge}
            </div>
        ` : '';
        
        // إنشاء سلايدر للصور
        const carouselIndicators = product.images.map((_, index) => `
            <button type="button" data-bs-target="#carousel-${product.id}" data-bs-slide-to="${index}" 
                ${index === 0 ? 'class="active" aria-current="true"' : ''} 
                aria-label="صورة ${index + 1}">
            </button>
        `).join('');
        
        const carouselItems = product.images.map((img, index) => `
            <div class="carousel-item ${index === 0 ? 'active' : ''}">
                <img src="${img}" class="d-block w-100" alt="${product.title}" loading="lazy">
            </div>
        `).join('');
        
        const carouselControls = product.images.length > 1 ? `
            <button class="carousel-control-prev" type="button" data-bs-target="#carousel-${product.id}" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">السابق</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carousel-${product.id}" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">التالي</span>
            </button>
        ` : '';
        
        const productCard = `
            <div class="col-6 col-md-4 col-lg-3 mb-4">
                <div class="product-card card h-100 position-relative">
                    ${productBadge}
                    ${discountBadge}
                    <div id="carousel-${product.id}" class="carousel slide product-carousel" data-bs-ride="carousel">
                        <div class="carousel-indicators">
                            ${carouselIndicators}
                        </div>
                        <div class="carousel-inner">
                            ${carouselItems}
                        </div>
                        ${carouselControls}
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">${product.title}</h5>
                        <p class="card-text text-muted small">${product.description_short}</p>
                        <div class="d-flex align-items-center mt-3">
                            ${oldPrice}
                            <p dir="ltr" class="fw-bold text-primary mb-0">${product.price.toLocaleString()} DA</p>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent border-0">
                        <button class="btn btn-orange w-100 add-to-cart-btn" data-id="${product.id}">
                            <i class="bi bi-cart-plus"></i> Ajouter au panier
                        </button>
                        <a href="product.html?pid=${product.id}" class="btn btn-outline-primary w-100 mt-2">
                            <i class="bi bi-eye"></i> Voir détails
                        </a>
                    </div>
                </div>
            </div>
        `;
        
        container.innerHTML += productCard;
    });
}

// دالة تحميل العروض الخاصة
async function loadSpecialOffers() {
    try {
        const response = await fetch('products.json');
        if (!response.ok) {
            throw new Error('Erreur lors du chargement des produits');
        }
        const products = await response.json();
        
        // اختر 3 منتجات لها خصم للعروض الخاصة
        const specialOffers = products
            .filter(product => product.old_price && product.old_price > product.price)
            .slice(0, 3);
        
        renderSpecialOffers(specialOffers);
    } catch (error) {
        console.error('Erreur lors du chargement des offres spéciales:', error);
    }
}

// دالة عرض العروض الخاصة
function renderSpecialOffers(offers) {
    const offersContainer = document.getElementById('specialOffersContainer');
    if (!offersContainer) return;
    
    if (offers.length === 0) {
        offersContainer.innerHTML = '<div class="col-12 text-center text-muted">Aucune offre spéciale pour le moment</div>';
        return;
    }
    
    offersContainer.innerHTML = offers.map((product, index) => {
        const discountPercentage = Math.round(((product.old_price - product.price) / product.old_price) * 100);
        
        return `
            <div class="col-md-4">
                <div class="offer-product">
                    <div class="offer-product-discount">-${discountPercentage}%</div>
                    ${product.badge ? `<div class="offer-product-badge">${product.badge}</div>` : ''}

                    <div id="carousel-offer-${product.id}" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-indicators">
                            ${product.images.map((_, i) => `
                                <button type="button" data-bs-target="#carousel-offer-${product.id}" data-bs-slide-to="${i}" 
                                    ${i === 0 ? 'class="active"' : ''}></button>
                            `).join('')}
                        </div>
                        <div class="carousel-inner">
                            ${product.images.map((img, i) => `
                                <div class="carousel-item ${i === 0 ? 'active' : ''}">
                                    <img src="${img}" class="d-block w-100" alt="${product.title}" height="300" loading="lazy">
                                </div>
                            `).join('')}
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carousel-offer-${product.id}" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon"></span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carousel-offer-${product.id}" data-bs-slide="next">
                            <span class="carousel-control-next-icon"></span>
                        </button>
                    </div>

                    <h4 class="offer-product-title">${product.title}</h4>
                    <div class="offer-product-price">${product.price.toLocaleString()} DA</div>
                    <div class="offer-product-old-price">${product.old_price.toLocaleString()} DA</div>
                    <button class="offer-btn add-to-cart-btn" data-id="${product.id}">
                        <i class="bi bi-cart-plus"></i> Acheter maintenant
                    </button>
                </div>
            </div>
        `;
    }).join('');
}

// ============== إعداد نظام الفئات ==============
function setupCategoryFilters() {
    document.querySelectorAll('.category-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            // إزالة النشط من جميع الأزرار
            document.querySelectorAll('.category-btn').forEach(b => {
                b.classList.remove('active');
            });
            
            // إضافة النشط للزر المحدد
            this.classList.add('active');
            
            // تصفية المنتجات حسب الفئة
            const category = this.dataset.category;
            loadAndDisplayProducts(category);
        });
    });
}

// ============== إعداد أزرار إضافة إلى السلة ==============
function setupAddToCartButtons() {
    document.addEventListener('click', function(e) {

        // اكتشاف الزر الحقيقي فقط
        const button = e.target.closest('.add-to-cart-btn');
        if (!button) return;

        e.preventDefault();

        const productId = button.getAttribute('data-id');

        fetch('products.json')
            .then(response => response.json())
            .then(products => {
                const product = products.find(p => p.id == productId);
                if (product) {
                    addToCart(
                        product.title,
                        `${product.price.toLocaleString()} DA`,
                        product.price,
                        product.images,
                        product.id
                    );
                }
            })
            .catch(error => {
                console.error('Error loading product:', error);
                showStatus('Error loading product details', 'error');
            });
    });
}

// ============== إدارة سلة المشتريات ==============

// تحميل السلة من localStorage
function loadCart() {
    try {
        const cartData = localStorage.getItem('robuste_cart');
        if (cartData) {
            cart = JSON.parse(cartData);
        }
    } catch (e) {
        console.error('خطأ في تحميل سلة المشتريات:', e);
        cart = [];
    }
}

// تحديث عداد السلة
function updateCartCount() {
    const cartCount = document.getElementById('cartCount');
    const checkoutBtn = document.getElementById('checkoutBtn');
    
    if (!cartCount || !checkoutBtn) return;
    
    const count = cart.reduce((total, item) => total + (item.quantity || 0), 0);
    cartCount.textContent = count;
    checkoutBtn.disabled = count === 0;
}

// عرض محتويات السلة
function renderCart() {
    const cartItems = document.getElementById('cartItems');
    const cartTotal = document.getElementById('cartTotal');
    
    if (!cartItems || !cartTotal) return;
    
    // مسح المحتوى الحالي
    while (cartItems.firstChild) {
        cartItems.removeChild(cartItems.firstChild);
    }
    
    if (cart.length === 0) {
        const emptyDiv = document.createElement('div');
        emptyDiv.className = 'text-center py-4 text-muted';
        emptyDiv.id = 'emptyCartMessage';
        emptyDiv.innerHTML = '<i class="bi bi-cart-x display-4 d-block mb-2"></i>سلة المشتريات فارغة';
        cartItems.appendChild(emptyDiv);
        cartTotal.textContent = '0 د.ج';
        return;
    }
    
    let total = 0;
    cart.forEach((item, index) => {
        const itemTotal = (item.price || 0) * (item.quantity || 0);
        total += itemTotal;
        
        const itemElement = document.createElement('div');
        itemElement.className = 'cart-item';
        itemElement.dataset.id = item.id || '';
        
        itemElement.innerHTML = `
            <div class="d-flex">
                <img src="${item.image || ''}" alt="${item.name || 'منتج'}" class="cart-item-img me-3">
                <div class="cart-item-details">
                    <div class="cart-item-title">${item.name || 'منتج بدون اسم'}</div>
                    <div class="cart-item-price">${item.price || 0} د.ج</div>
                    <div class="quantity-controls">
                        <button class="quantity-btn" data-action="decrease" data-index="${index}">-</button>
                        <input type="number" class="quantity-input" value="${item.quantity || 1}" min="1" data-index="${index}">
                        <button class="quantity-btn" data-action="increase" data-index="${index}">+</button>
                    </div>
                </div>
                <button class="remove-item align-self-start" data-index="${index}">
                    <i class="bi bi-trash"></i>
                </button>
            </div>
        `;
        
        cartItems.appendChild(itemElement);
    });
    
    cartTotal.textContent = `${total.toLocaleString('ar-DZ')} د.ج`;
    
    // إضافة معالجي الأحداث بعد عرض العناصر
    attachCartEventListeners();
}

// إضافة معالجي الأحداث لعناصر السلة
function attachCartEventListeners() {
    // معالجة أزرار الكمية
    document.querySelectorAll('.quantity-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            const index = parseInt(this.dataset.index);
            const action = this.dataset.action;
            
            if (isNaN(index) || index < 0 || index >= cart.length) return;
            
            if (action === 'increase') {
                updateQuantity(index, cart[index].quantity + 1);
            } else if (action === 'decrease') {
                updateQuantity(index, cart[index].quantity - 1);
            }
        });
    });
    
    // معالجة حقول الإدخال
    document.querySelectorAll('.quantity-input').forEach(input => {
        input.addEventListener('change', function(e) {
            const index = parseInt(this.dataset.index);
            if (isNaN(index) || index < 0 || index >= cart.length) return;
            
            const newQuantity = parseInt(this.value) || 1;
            updateQuantity(index, newQuantity);
        });
        
        // منع الإدخال غير الرقمي
        input.addEventListener('keydown', function(e) {
            if (!/[\d\b\t\n]|Arrow|Delete|Backspace|Tab/.test(e.key) && 
                !(e.ctrlKey || e.metaKey)) {
                e.preventDefault();
            }
        });
    });
    
    // معالجة أزرار الحذف
    document.querySelectorAll('.remove-item').forEach(btn => {
        btn.addEventListener('click', function(e) {
            const index = parseInt(this.dataset.index);
            if (isNaN(index) || index < 0 || index >= cart.length) return;
            
            removeFromCart(index);
        });
    });
}

// إضافة منتج إلى السلة - التصحيح هنا
function addToCart(productName, productPrice, priceValue, productImages, productId) {
    const name = typeof productName === 'string' ? productName : 'منتج بدون اسم';
    const price = typeof priceValue === 'number' ? priceValue : 
                 typeof productPrice === 'number' ? productPrice : 0;
    const id = productId || Date.now().toString();
    
    let image = '';
    if (Array.isArray(productImages) && productImages.length > 0) {
        image = productImages[0];
    } else if (typeof productImages === 'string') {
        image = productImages;
    }
    
    const existingItemIndex = cart.findIndex(item => item.id === id);
    
    if (existingItemIndex >= 0) {
        // إذا المنتج موجود في السلة، نزيد الكمية بواحدة فقط
        cart[existingItemIndex].quantity += 1;
    } else {
        // إذا المنتج غير موجود، نضيفه بكمية واحدة فقط
        cart.push({
            id: id,
            name: name,
            price: price,
            image: image,
            quantity: 1
        });
    }
    
    // حفظ السلة في localStorage
    try {
        localStorage.setItem('robuste_cart', JSON.stringify(cart));
    } catch (e) {
        console.error('خطأ في حفظ السلة:', e);
        showStatus('تعذر حفظ السلة، قد تكون ذاكرة التخزين ممتلئة', 'error');
    }
    
    // تحديث الواجهة
    updateCartCount();
    renderCart();
    
    // إظهار تأكيد الإضافة
    showStatus(`تمت إضافة "${name}" إلى السلة`, 'success');
}

// تحديث كمية المنتج
function updateQuantity(index, newQuantity) {
    if (isNaN(index) || index < 0 || index >= cart.length) return;
    
    if (newQuantity < 1) {
        removeFromCart(index);
        return;
    }
    
    cart[index].quantity = newQuantity;
    
    try {
        localStorage.setItem('robuste_cart', JSON.stringify(cart));
    } catch (e) {
        console.error('خطأ في تحديث السلة:', e);
    }
    
    renderCart();
    updateCartCount();
}

// إزالة منتج من السلة
function removeFromCart(index) {
    if (isNaN(index) || index < 0 || index >= cart.length) return;
    
    const productName = cart[index].name || 'منتج';
    cart.splice(index, 1);
    
    try {
        localStorage.setItem('robuste_cart', JSON.stringify(cart));
    } catch (e) {
        console.error('خطأ في تحديث السلة:', e);
    }
    
    renderCart();
    updateCartCount();
    showStatus(`تمت إزالة "${productName}" من السلة`, 'success');
}

// إظهار/إخفاء السلة
function toggleCart() {
    if (cart.length === 0) {
        showStatus('سلة المشتريات فارغة', 'info');
        return;
    }
    
    try {
        const cartOffcanvas = new bootstrap.Offcanvas(document.getElementById('cartOffcanvas'));
        cartOffcanvas.show();
    } catch (e) {
        console.error('خطأ في فتح السلة:', e);
        document.getElementById('cartOffcanvas').classList.add('show');
        document.body.classList.add('offcanvas-open');
    }
}

// ============== إتمام عملية الشراء من السلة ==============
function checkout() {
    if (cart.length === 0) {
        showStatus('سلة المشتريات فارغة', 'error');
        return;
    }
    
    // إخفاء سلة المشتريات
    const cartOffcanvas = bootstrap.Offcanvas.getInstance(document.getElementById('cartOffcanvas'));
    if (cartOffcanvas) {
        cartOffcanvas.hide();
    }
    
    // إعداد بيانات الطلب
    const firstItem = cart[0];
    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    
    // ملء نموذج الطلب
    document.getElementById('productName').value = `${cart.length} منتجات مختلفة`;
    document.getElementById('productPriceValue').value = total;
    document.getElementById('productImageUrl').value = firstItem.image;
    
    document.getElementById('productNameDisplay').textContent = `${cart.length} منتجات مختلفة`;
    document.getElementById('productPrice').textContent = `${total.toLocaleString()} DA`;
    document.getElementById('productImage').src = firstItem.image;
    
    // إعادة تعيين النموذج
    document.getElementById('orderForm').reset();
    document.getElementById('cashOnDelivery').checked = true;
    
    // إظهار نموذج الطلب
    if (orderModal) {
        orderModal.show();
    }
}

// ============== وظائف الطلب ==============

// إرسال الطلب
async function submitOrder() {
    const productName = document.getElementById('productName').value;
    const productPrice = document.getElementById('productPriceValue').value;
    const productImage = document.getElementById('productImageUrl').value;
    const fullName = document.getElementById('fullName').value;
    const phone = document.getElementById('phone').value;
    const email = document.getElementById('email').value || 'لم يتم تقديمه';
    const wilaya = document.getElementById('wilaya').value;
    const address = document.getElementById('address').value || 'غير محدد';
    const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
    
    // التحقق من صحة البيانات
    if (!fullName || !phone || !wilaya) {
        showStatus('الرجاء ملء جميع الحقول المطلوبة', 'error');
        return;
    }
    
    const phoneRegex = /^0[5-7][0-9]{8}$/;
    if (!phoneRegex.test(phone)) {
        showStatus('رقم الهاتف غير صحيح. يجب أن يتكون من 10 أرقام ويبدأ بـ 05 أو 06 أو 07', 'error');
        return;
    }
    
    // حساب المجموع الكلي
    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    
    // إعداد بيانات الطلب
    const orderData = {
        products: cart,
        customer: fullName,
        phone: phone,
        email: email,
        wilaya: wilaya,
        address: address,
        payment: paymentMethod,
        totalPrice: total,
        timestamp: new Date().toISOString(),
        status: 'جديد'
    };
    
    // عرض حالة التحميل
    showStatus('جاري معالجة طلبك...', 'loading');
    
    // تعطيل زر الإرسال أثناء المعالجة
    const submitBtn = document.getElementById('submitOrderBtn');
    submitBtn.disabled = true;
    submitBtn.innerHTML = `
        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
        جاري المعالجة...
    `;
    
    try {
        // تخزين الطلب في Firebase
        const docRef = await db.collection('orders').add(orderData);
        console.log("تم تخزين الطلب في Firebase:", docRef.id);
        
        // إنشاء قائمة المنتجات للبريد الإلكتروني
        const productsList = cart.map(item => `
            <div style="margin-bottom: 10px; padding: 8px; border-bottom: 1px solid #eee;">
                <strong>المنتج:</strong> ${item.name} <br>
                <strong>الكمية:</strong> ${item.quantity} <br>
                <strong>السعر:</strong> ${item.price.toLocaleString()} د.ج <br>
                <strong>المجموع:</strong> ${(item.price * item.quantity).toLocaleString()} د.ج
            </div>
        `).join('');
        
        // إرسال إيميل عبر EmailJS
        await emailjs.send("service_lc1q5k8", "template_a15g7yg", {
            order_id: docRef.id,
            customer_name: fullName,
            customer_phone: phone,
            customer_email: email,
            wilaya: wilaya,
            address: address,
            total_price: total.toLocaleString(),
            payment_method: paymentMethod,
            order_date: new Date().toLocaleString('ar-DZ'),
            products: productsList
        });
        
        console.log("تم إرسال إيميل تأكيد الطلب");
        
        // عرض رسالة النجاح
        showStatus(`
            <div class="text-center">
                <i class="bi bi-check-circle-fill text-success fs-1"></i>
                <h5 class="mt-2">تم تأكيد طلبك بنجاح!</h5>
                <div class="text-start mt-3">
                    <p><strong>رقم الطلب:</strong> ${docRef.id}</p>
                    <p><strong>الاسم:</strong> ${fullName}</p>
                    <p><strong>عدد المنتجات:</strong> ${cart.length} منتجات</p>
                    <p><strong>المبلغ الإجمالي:</strong> ${total.toLocaleString()} د.ج</p>
                    <p class="mt-3">سيتم التواصل معك على الرقم <strong>${phone}</strong> خلال 24 ساعة لتأكيد الشحن.</p>
                </div>
                <a href="https://wa.me/213656360457?text=${encodeURIComponent(
                    `استفسار عن الطلب ${docRef.id}\nالاسم: ${fullName}\nعدد المنتجات: ${cart.length}\nالمجموع: ${total.toLocaleString()} د.ج\nرقم الهاتف: ${phone}`
                )}" class="btn whatsapp-contact-btn mt-2 w-100" target="_blank">
                    <i class="bi bi-whatsapp"></i> تواصل عبر واتساب (اختياري)
                </a>
            </div>
        `, 'success');
        
        // تفريغ السلة وإعادة تعيين النموذج
        cart = [];
        localStorage.removeItem('robuste_cart');
        updateCartCount();
        document.getElementById('orderForm').reset();
        if (orderModal) {
            orderModal.hide();
        }
        
    } catch (error) {
        console.error('حدث خطأ:', error);
        
        let errorMessage = 'حدث خطأ غير متوقع. يرجى المحاولة مرة أخرى.';
        if (error.code) {
            errorMessage = `خطأ في النظام: ${error.code}`;
        } else if (error.message) {
            errorMessage = error.message;
        } else if (error.text) {
            errorMessage = error.text;
        }
        
        showStatus(`حدث خطأ أثناء إرسال الطلب: ${errorMessage}`, 'error');
    } finally {
        // إعادة تمكين زر الإرسال
        submitBtn.disabled = false;
        submitBtn.innerHTML = 'تأكيد الطلب';
    }
}

// ============== وظائف الاتصال ==============

// إرسال رسالة الاتصال
async function sendContactMessage() {
    const name = document.getElementById('contactName').value;
    const email = document.getElementById('contactEmail').value;
    const phone = document.getElementById('contactPhone').value || 'لم يتم تقديمه';
    const message = document.getElementById('contactMessage').value;
    
    if (!name || !email || !message) {
        showStatus('الرجاء ملء جميع الحقول المطلوبة', 'error');
        return;
    }
    
    // عرض حالة التحميل
    const contactSpinner = document.getElementById('contactSpinner');
    const contactSubmitText = document.getElementById('contactSubmitText');
    contactSpinner.classList.remove('d-none');
    contactSubmitText.textContent = 'جاري الإرسال...';
    
    try {
        // إرسال رسالة الاتصال عبر EmailJS
        await emailjs.send("service_lc1q5k8", "template_11pkq0k", {
            from_name: name,
            from_email: email,
            phone_number: phone,
            message: message
        });
        
        console.log("تم إرسال رسالة الاتصال");
        
        showStatus('تم إرسال رسالتك بنجاح! سوف نتواصل معك قريباً.', 'success');
        document.getElementById('contactForm').reset();
    } catch (error) {
        console.error('حدث خطأ:', error);
        
        let errorMessage = 'حدث خطأ غير متوقع. يرجى المحاولة مرة أخرى.';
        if (error.code) {
            errorMessage = `خطأ في النظام: ${error.code}`;
        } else if (error.message) {
            errorMessage = error.message;
        } else if (error.text) {
            errorMessage = error.text;
        }
        
        showStatus(`حدث خطأ أثناء إرسال الرسالة: ${errorMessage}`, 'error');
    } finally {
        // إعادة تمكين زر الإرسال
        contactSpinner.classList.add('d-none');
        contactSubmitText.textContent = 'إرسال الرسالة';
    }
}

// ============== وظائف مساعدة ==============

// تعبئة قائمة الولايات
function populateWilayas() {
    const wilayaSelect = document.getElementById('wilaya');
    wilayas.forEach(wilaya => {
        const option = document.createElement('option');
        option.value = wilaya;
        option.textContent = wilaya;
        wilayaSelect.appendChild(option);
    });
}

// بدء مؤقت العرض الخاص
function startOfferTimer() {
    const daysElement = document.getElementById('days');
    const hoursElement = document.getElementById('hours');
    const minutesElement = document.getElementById('minutes');
    const secondsElement = document.getElementById('seconds');
    
    // تاريخ انتهاء العرض (3 أيام من الآن)
    const endDate = new Date();
    endDate.setDate(endDate.getDate() + 3);
    
    function updateTimer() {
        const now = new Date();
        const difference = endDate - now;
        
        if (difference <= 0) {
            // انتهى الوقت
            daysElement.textContent = '00';
            hoursElement.textContent = '00';
            minutesElement.textContent = '00';
            secondsElement.textContent = '00';
            return;
        }
        
        // حساب الأيام، الساعات، الدقائق، الثواني
        const days = Math.floor(difference / (1000 * 60 * 60 * 24));
        const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((difference % (1000 * 60)) / 1000);
        
        // تحديث العناصر
        daysElement.textContent = days.toString().padStart(2, '0');
        hoursElement.textContent = hours.toString().padStart(2, '0');
        minutesElement.textContent = minutes.toString().padStart(2, '0');
        secondsElement.textContent = seconds.toString().padStart(2, '0');
    }
    
    // تحديث المؤثر كل ثانية
    updateTimer();
    setInterval(updateTimer, 1000);
}

// عرض حالة الطلب
function showStatus(message, type) {
    const indicator = document.getElementById('statusIndicator');
    const messageElement = document.getElementById('statusMessage');
    
    // إعداد الرسالة
    messageElement.innerHTML = message;
    
    // إعداد التصميم حسب النوع
    const alert = indicator.querySelector('.alert');
    alert.className = 'alert alert-dismissible fade show';
    
    switch (type) {
        case 'success':
            alert.classList.add('alert-success', 'order-confirmation');
            break;
        case 'error':
            alert.classList.add('alert-danger', 'order-error');
            break;
        case 'loading':
            alert.classList.add('alert-info');
            messageElement.innerHTML = `
                <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                ${message}
            `;
            break;
        default:
            alert.classList.add('alert-info');
    }
    
    // إظهار المؤشر
    indicator.style.display = 'block';
    
    // إخفاء التلقائي لرسائل النجاح بعد 5 ثواني
    if (type === 'success') {
        setTimeout(hideStatus, 5000);
    }
}

// إخفاء مؤشر الحالة
function hideStatus() {
    document.getElementById('statusIndicator').style.display = 'none';
}

// ============== السلايدر ==============
let slideIndex1 = 1;
showSlides1(slideIndex1);

// التحكم بالأزرار
function plusSlides1(n) {
  showSlides1(slideIndex1 += n);
}

// التحكم بالنقاط
function currentSlide1(n) {
  showSlides1(slideIndex1 = n);
}

function showSlides1(n) {
  const slides = document.getElementsByClassName("mySlides1");
  const dots = document.getElementsByClassName("dot1");

  if (n > slides.length) slideIndex1 = 1;
  if (n < 1) slideIndex1 = slides.length;

  for (let s of slides) s.style.display = "none";
  for (let d of dots) d.className = d.className.replace(" active", "");

  slides[slideIndex1 - 1].style.display = "block";
  dots[slideIndex1 - 1].className += " active";
}

// تشغيل تلقائي
setInterval(() => {
  plusSlides1(1);
}, 4000);

// ============== تهيئة الصفحة عند التحميل ==============
document.addEventListener('DOMContentLoaded', function() {
    // تحميل السلة أولاً
    loadCart();
    
    // تهيئة جميع الأنظمة
    loadAndDisplayProducts(); // تحميل جميع المنتجات
    setupCategoryFilters(); // إعداد نظام الفئات
    setupAddToCartButtons(); // إعداد أزرار إضافة إلى السلة
    loadSpecialOffers(); // تحميل العروض الخاصة
    populateWilayas(); // تعبئة قائمة الولايات
    startOfferTimer(); // بدء مؤقت العرض الخاص
    
    // تهيئة نموذج الطلب
    orderModal = new bootstrap.Modal(document.getElementById('orderModal'));
    
    // إعداد نموذج الاتصال
    document.getElementById('contactForm').addEventListener('submit', function(e) {
        e.preventDefault();
        sendContactMessage();
    });
    
    // تحديث واجهة السلة
    updateCartCount();
    renderCart();
});
// ============== وظيفة تبديل وضع الظلام ==============
function toggleDarkMode() {
    const currentTheme = document.documentElement.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    
    // تغيير السمة
    document.documentElement.setAttribute('data-theme', newTheme);
    
    // تحديث أيقونة الزر
    const themeIcon = document.querySelector('#themeToggle i');
    if (newTheme === 'dark') {
        themeIcon.className = 'bi bi-sun';
        themeIcon.parentElement.title = 'تفعيل وضع النهار';
    } else {
        themeIcon.className = 'bi bi-moon';
        themeIcon.parentElement.title = 'تفعيل وضع الظلام';
    }
    
    // حفظ التفضيل في localStorage
    localStorage.setItem('theme', newTheme);
}

// تهيئة وضع الظلام عند تحميل الصفحة
function initDarkMode() {
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
    
    const themeIcon = document.querySelector('#themeToggle i');
    if (savedTheme === 'dark') {
        themeIcon.className = 'bi bi-sun';
        themeIcon.parentElement.title = 'تفعيل وضع النهار';
    } else {
        themeIcon.className = 'bi bi-moon';
        themeIcon.parentElement.title = 'تفعيل وضع الظلام';
    }
    
    // إضافة مستمع الحدث
    document.getElementById('themeToggle').addEventListener('click', toggleDarkMode);
}

// تهيئة وضع الظلام عند تحميل DOM
document.addEventListener('DOMContentLoaded', function() {
    initDarkMode();
    
    // باقي تهيئة الصفحة...
    loadCart();
    loadAndDisplayProducts();
    setupCategoryFilters();
    setupAddToCartButtons();
    loadSpecialOffers();
    populateWilayas();
    startOfferTimer();
    orderModal = new bootstrap.Modal(document.getElementById('orderModal'));
    document.getElementById('contactForm').addEventListener('submit', function(e) {
        e.preventDefault();
        sendContactMessage();
    });
    updateCartCount();
    renderCart();
});

// ============== تكييف حجم نموذج الطلب للأجهزة الصغيرة ==============

// دالة لتقليل حجم وتكييف النموذج للأجهزة الصغيرة
function adjustOrderModalForMobile() {
    const modal = document.getElementById('orderModal');
    if (!modal) return;
    
    // التأكد من أن النموذج متاح
    if (typeof bootstrap !== 'undefined' && bootstrap.Modal) {
        const modalInstance = bootstrap.Modal.getInstance(modal);
        if (modalInstance) {
            // تحديث موقع النموذج
            modal.classList.add('modal-mobile-optimized');
        }
    }
    
    // التحقق إذا كنا على جهاز محمول
    const isMobile = window.innerWidth <= 768;
    
    if (isMobile) {
        // تكييف النموذج للأجهزة المحمولة
        optimizeModalForMobile();
        
        // تكييف حقول الإدخال
        adjustInputFieldsForMobile();
        
        // تكييف أزرار الراديو
        adjustRadioButtonsForMobile();
        
        // تكييف قائمة الولايات
        adjustWilayaSelectForMobile();
        
        // تكييف الأزرار
        adjustButtonsForMobile();
        
        // تكييف ملخص الطلب
        adjustOrderSummaryForMobile();
    } else {
        // إعادة التعيين للشاشات الكبيرة
        resetModalForDesktop();
    }
}

// تكييف النموذج للأجهزة المحمولة
function optimizeModalForMobile() {
    const modal = document.getElementById('orderModal');
    const modalContent = modal.querySelector('.modal-content');
    const modalBody = modal.querySelector('.modal-body');
    const modalFooter = modal.querySelector('.modal-footer');
    
    // إضافة فئات التكييف
    modal.classList.add('mobile-optimized');
    if (modalContent) modalContent.classList.add('mobile-content');
    if (modalBody) modalBody.classList.add('mobile-body');
    if (modalFooter) modalFooter.classList.add('mobile-footer');
    
    // تعديل الهوامش والحشوات
    if (modalBody) {
        modalBody.style.padding = '15px';
        modalBody.style.maxHeight = '70vh';
        modalBody.style.overflowY = 'auto';
    }
    
    // إضافة شريط تمرير مخصص
    addCustomScrollbar(modalBody);
}

// تكييف حقول الإدخال للأجهزة المحمولة
function adjustInputFieldsForMobile() {
    const inputs = document.querySelectorAll('#orderForm .form-control, #orderForm .form-select');
    
    inputs.forEach(input => {
        // إضافة فئة خاصة للأجهزة المحمولة
        input.classList.add('mobile-input');
        
        // ضبط الحشوات والارتفاع
        input.style.padding = '10px 12px';
        input.style.height = '44px';
        input.style.fontSize = '16px'; // منع تكبير iOS
        
        // إضافة تأثير التركيز المحسن
        input.addEventListener('focus', function() {
            this.style.borderColor = 'var(--primary)';
            this.style.boxShadow = '0 0 0 2px rgba(255, 107, 53, 0.2)';
        });
        
        input.addEventListener('blur', function() {
            this.style.borderColor = '';
            this.style.boxShadow = '';
        });
    });
    
    // تكييف خاص لحقول النصوص الكبيرة
    const textarea = document.getElementById('address');
    if (textarea) {
        textarea.style.minHeight = '80px';
        textarea.style.maxHeight = '120px';
        textarea.style.resize = 'vertical';
    }
}

// تكييف أزرار الراديو للأجهزة المحمولة
function adjustRadioButtonsForMobile() {
    const radioButtons = document.querySelectorAll('#orderForm .form-check');
    
    radioButtons.forEach(radio => {
        radio.classList.add('mobile-radio');
        
        // تكبير مساحة اللمس
        const label = radio.querySelector('.form-check-label');
        const input = radio.querySelector('.form-check-input');
        
        if (label && input) {
            // جعل التسمية قابلة للنقر بالكامل
            label.style.padding = '10px 15px 10px 35px';
            label.style.borderRadius = '8px';
            label.style.backgroundColor = 'rgba(0, 0, 0, 0.03)';
            label.style.display = 'block';
            label.style.marginBottom = '5px';
            label.style.cursor = 'pointer';
            label.style.transition = 'all 0.2s ease';
            
            // إضافة تأثير hover
            label.addEventListener('mouseenter', function() {
                this.style.backgroundColor = 'rgba(255, 107, 53, 0.1)';
            });
            
            label.addEventListener('mouseleave', function() {
                if (!input.checked) {
                    this.style.backgroundColor = 'rgba(0, 0, 0, 0.03)';
                }
            });
            
            // تحديث التصميم عند التحديد
            input.addEventListener('change', function() {
                const allLabels = document.querySelectorAll('#orderForm .form-check-label');
                allLabels.forEach(l => {
                    l.style.backgroundColor = 'rgba(0, 0, 0, 0.03)';
                    l.style.color = '';
                });
                
                if (this.checked) {
                    label.style.backgroundColor = 'rgba(255, 107, 53, 0.15)';
                    label.style.color = 'var(--primary)';
                    label.style.fontWeight = '600';
                }
            });
            
            // تحسين وضع الراديو
            input.style.width = '20px';
            input.style.height = '20px';
            input.style.marginTop = '0';
            input.style.position = 'absolute';
            input.style.left = '10px';
            input.style.top = '50%';
            input.style.transform = 'translateY(-50%)';
        }
    });
}

// تكييف قائمة الولايات للأجهزة المحمولة
function adjustWilayaSelectForMobile() {
    const wilayaSelect = document.getElementById('wilaya');
    if (!wilayaSelect) return;
    
    wilayaSelect.classList.add('mobile-select');
    
    // تحسين مظهر القائمة
    wilayaSelect.style.padding = '10px 35px 10px 12px';
    wilayaSelect.style.backgroundPosition = 'left 12px center';
    wilayaSelect.style.fontSize = '16px';
    
    // تحسين خيارات القائمة
    const options = wilayaSelect.options;
    for (let i = 0; i < options.length; i++) {
        options[i].style.padding = '8px 12px';
        options[i].style.fontSize = '14px';
    }
    
    // إضافة تأثير التركيز
    wilayaSelect.addEventListener('focus', function() {
        this.style.borderColor = 'var(--primary)';
        this.style.boxShadow = '0 0 0 2px rgba(255, 107, 53, 0.2)';
    });
    
    wilayaSelect.addEventListener('blur', function() {
        this.style.borderColor = '';
        this.style.boxShadow = '';
    });
}

// تكييف الأزرار للأجهزة المحمولة
function adjustButtonsForMobile() {
    const submitBtn = document.getElementById('submitOrderBtn');
    const cancelBtn = document.querySelector('#orderModal .btn-secondary');
    
    // تكييف زر التأكيد
    if (submitBtn) {
        submitBtn.classList.add('mobile-submit-btn');
        submitBtn.style.padding = '12px 20px';
        submitBtn.style.fontSize = '1rem';
        submitBtn.style.fontWeight = '600';
        submitBtn.style.borderRadius = '8px';
        submitBtn.style.marginBottom = '8px';
        submitBtn.style.width = '100%';
        submitBtn.style.height = '48px';
        submitBtn.style.display = 'flex';
        submitBtn.style.alignItems = 'center';
        submitBtn.style.justifyContent = 'center';
        submitBtn.style.gap = '8px';
        
        // منع مشاكل اللمس على iOS
        submitBtn.style.webkitTapHighlightColor = 'transparent';
        submitBtn.style.userSelect = 'none';
        submitBtn.style.touchAction = 'manipulation';
    }
    
    // تكييف زر الإلغاء
    if (cancelBtn) {
        cancelBtn.classList.add('mobile-cancel-btn');
        cancelBtn.style.padding = '12px 20px';
        cancelBtn.style.fontSize = '1rem';
        cancelBtn.style.fontWeight = '500';
        cancelBtn.style.borderRadius = '8px';
        cancelBtn.style.width = '100%';
        cancelBtn.style.height = '48px';
        
        // منع مشاكل اللمس على iOS
        cancelBtn.style.webkitTapHighlightColor = 'transparent';
        cancelBtn.style.userSelect = 'none';
        cancelBtn.style.touchAction = 'manipulation';
    }
}

// تكييف ملخص الطلب للأجهزة المحمولة
function adjustOrderSummaryForMobile() {
    const orderSummary = document.querySelector('.order-summary');
    if (!orderSummary) return;
    
    orderSummary.classList.add('mobile-summary');
    orderSummary.style.padding = '12px';
    orderSummary.style.marginBottom = '15px';
    orderSummary.style.borderRadius = '10px';
    
    // تكييف صورة المنتج
    const productImage = document.getElementById('productImage');
    if (productImage) {
        productImage.style.width = '50px';
        productImage.style.height = '50px';
        productImage.style.objectFit = 'cover';
    }
    
    // تكييف نص المنتج
    const productName = document.getElementById('productNameDisplay');
    if (productName) {
        productName.style.fontSize = '0.95rem';
        productName.style.lineHeight = '1.3';
        productName.style.marginBottom = '4px';
    }
    
    const productPrice = document.getElementById('productPrice');
    if (productPrice) {
        productPrice.style.fontSize = '0.9rem';
        productPrice.style.fontWeight = '700';
    }
}

// إضافة شريط تمرير مخصص
function addCustomScrollbar(element) {
    if (!element) return;
    
    // إضافة أنماط شريط التمرير
    const scrollbarStyles = `
        .mobile-body::-webkit-scrollbar {
            width: 4px;
        }
        
        .mobile-body::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 2px;
        }
        
        .mobile-body::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 2px;
        }
        
        .mobile-body::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
        
        [data-theme="dark"] .mobile-body::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }
        
        [data-theme="dark"] .mobile-body::-webkit-scrollbar-thumb {
            background: var(--primary);
        }
    `;
    
    // إضافة الأنماط إذا لم تكن موجودة
    if (!document.getElementById('mobile-scrollbar-styles')) {
        const styleEl = document.createElement('style');
        styleEl.id = 'mobile-scrollbar-styles';
        styleEl.textContent = scrollbarStyles;
        document.head.appendChild(styleEl);
    }
}

// إعادة تعيين النموذج للشاشات الكبيرة
function resetModalForDesktop() {
    const modal = document.getElementById('orderModal');
    
    // إزالة فئات التكييف
    modal.classList.remove('mobile-optimized', 'mobile-optimized');
    
    // إزالة الأنماط المضافة
    const mobileElements = document.querySelectorAll('.mobile-input, .mobile-radio, .mobile-select, .mobile-submit-btn, .mobile-cancel-btn, .mobile-summary');
    mobileElements.forEach(el => {
        el.classList.remove('mobile-input', 'mobile-radio', 'mobile-select', 'mobile-submit-btn', 'mobile-cancel-btn', 'mobile-summary');
        el.removeAttribute('style');
    });
    
    // إزالة معالجات الأحداث
    const inputs = document.querySelectorAll('#orderForm .form-control, #orderForm .form-select');
    inputs.forEach(input => {
        const newInput = input.cloneNode(true);
        input.parentNode.replaceChild(newInput, input);
    });
    
    // إزالة معالجات أزرار الراديو
    const radios = document.querySelectorAll('#orderForm .form-check-input');
    radios.forEach(radio => {
        const newRadio = radio.cloneNode(true);
        radio.parentNode.replaceChild(newRadio, radio);
    });
}

// ============== إدارة أحداث النموذج ==============

// استدعاء التكييف عند فتح النموذج
document.addEventListener('DOMContentLoaded', function() {
    const orderModal = document.getElementById('orderModal');
    
    if (orderModal) {
        orderModal.addEventListener('show.bs.modal', function() {
            setTimeout(() => {
                adjustOrderModalForMobile();
            }, 50);
        });
        
        orderModal.addEventListener('shown.bs.modal', function() {
            // إعادة حساب الأحجام بعد عرض النموذج
            adjustOrderModalForMobile();
        });
    }
    
    // تكييف عند تغيير حجم النافذة
    window.addEventListener('resize', function() {
        if (document.getElementById('orderModal').classList.contains('show')) {
            adjustOrderModalForMobile();
        }
    });
    
    // تكييف عند تغيير وضع Dark Mode
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.attributeName === 'data-theme') {
                if (document.getElementById('orderModal').classList.contains('show')) {
                    setTimeout(adjustOrderModalForMobile, 100);
                }
            }
        });
    });
    
    observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['data-theme']
    });
});

// ============== منع مشاكل الأزرار الكبيرة ==============

// منع التكبير عند النقر على الأزرار في iOS
document.addEventListener('touchstart', function(e) {
    if (e.target.classList.contains('btn') || 
        e.target.closest('.btn') || 
        e.target.classList.contains('form-check-label') ||
        e.target.closest('.form-check-label')) {
        // إضافة تأثير النقر بدون تكبير
        e.target.style.transform = 'scale(0.98)';
        
        setTimeout(() => {
            if (e.target && e.target.style) {
                e.target.style.transform = '';
            }
        }, 150);
    }
}, { passive: true });

// منع السلوك الافتراضي على الأزرار في الأجهزة المحمولة
document.addEventListener('touchend', function(e) {
    const target = e.target;
    if (target.tagName === 'BUTTON' || 
        target.classList.contains('btn') || 
        target.closest('.btn')) {
        e.preventDefault();
    }
}, { passive: false });

// تحسين استجابة الأزرار
document.addEventListener('DOMContentLoaded', function() {
    const buttons = document.querySelectorAll('#orderModal .btn, #orderForm .form-check-label');
    
    buttons.forEach(btn => {
        btn.style.touchAction = 'manipulation';
        btn.style.webkitTapHighlightColor = 'transparent';
        btn.style.userSelect = 'none';
    });
});

// ============== التحسينات النهائية ==============

// تشغيل التكييف الأولي
setTimeout(() => {
    if (document.getElementById('orderModal').classList.contains('show')) {
        adjustOrderModalForMobile();
    }
}, 1000);

// إضافة دعم لـ Fast Click (تحسين الاستجابة على الهواتف)
document.addEventListener('DOMContentLoaded', function() {
    // تقليل تأخير النقر على الروابط والأزرار
    if ('ontouchstart' in window) {
        document.documentElement.style.cursor = 'pointer';
    }
});
</script>
<div class="offcanvas offcanvas-end" tabindex="-1" id="cartOffcanvas" aria-labelledby="cartOffcanvasLabel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="cartOffcanvasLabel">Panier d'achat</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <div id="cartItems" class="mb-3">
            
            <div class="text-center py-4 text-muted" id="emptyCartMessage">
                <i class="bi bi-cart-x display-4 d-block mb-2"></i>
                Panier d'achat فارغة
            </div>
        </div>
        
        <div class="cart-summary border-top pt-3">
            <div class="d-flex justify-content-between mb-2">
                <span>Total:</span>
                <span id="cartTotal">0 د.ج</span>
            </div>
            <button class="btn btn-orange w-100" onclick="checkout()" id="checkoutBtn" disabled>
                <i class="bi bi-bag-check"></i> Finaliser la commande
            </button>
        </div>
    </div>
</div></body></html>

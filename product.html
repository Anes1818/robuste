<!DOCTYPE html>
<html dir="rtl" lang="fr">
<head>
<meta name="description" content="Robuste eulma - Découvrez nos produits électroménagers de haute qualité avec garantie et livraison rapide en Algérie">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- أيقونة SVG -->
<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">

<!-- Theme color -->
<meta name="theme-color" content="#ff6600">
<title>Robuste eulma - Produit</title>

<!-- Google Fonts (Tajawal) -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">

<!-- Bootstrap RTL -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

<style>
:root {
    --primary: #FF6B35;
    --primary-dark: #E05A2B;
    --secondary: #FFF8F0;
    --light: #FFFFFF;
    --dark: #333333;
    --gray: #6C757D;
    --success: #28a745;
    --danger: #dc3545;
}

body {
    font-family: 'Tajawal', sans-serif;
    background-color: var(--secondary);
    color: var(--dark);
    padding-top: 56px;
}

.navbar {
    background-color: var(--light);
    box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.navbar-brand {
    color: var(--primary) !important;
    font-weight: 700;
    font-size: 1.5rem;
}

/* أنماط صفحة المنتج */
.product-page {
    padding: 40px 0;
}

.product-gallery {
    position: sticky;
    top: 80px;
}

.main-image {
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 15px;
    background: #f8f9fa;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 400px;
}

.main-image img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

.thumbnails {
    display: flex;
    gap: 10px;
    overflow-x: auto;
    padding: 10px 0;
}

.thumbnail {
    width: 80px;
    height: 80px;
    border-radius: 8px;
    overflow: hidden;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.3s ease;
    flex-shrink: 0;
}

.thumbnail.active {
    border-color: var(--primary);
}

.thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.product-info {
    background: white;
    border-radius: 12px;
    padding: 30px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
}

.product-badge {
    display: inline-block;
    background: var(--primary);
    color: white;
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: 15px;
}

.product-title {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 15px;
    color: var(--dark);
}

.rating {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
}

.stars {
    color: #FFD700;
    margin-left: 10px;
}

.rating-text {
    color: var(--gray);
    font-size: 0.9rem;
}

.price-section {
    margin-bottom: 25px;
}

.current-price {
    font-size: 2rem;
    font-weight: 800;
    color: var(--primary);
    margin-left: 10px;
}

.old-price {
    font-size: 1.2rem;
    color: var(--gray);
    text-decoration: line-through;
}

.discount {
    background: var(--danger);
    color: white;
    padding: 3px 10px;
    border-radius: 15px;
    font-size: 0.9rem;
    font-weight: 600;
    margin-right: 10px;
}

.features-list {
    margin: 25px 0;
}

.features-list li {
    margin-bottom: 10px;
    padding-right: 25px;
    position: relative;
}

.features-list li:before {
    content: "✓";
    position: absolute;
    right: 0;
    color: var(--success);
    font-weight: bold;
}

.stock-info {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
}

.stock-info.in-stock {
    color: var(--success);
}

.stock-info i {
    margin-left: 10px;
    font-size: 1.2rem;
}

.action-buttons {
    display: flex;
    gap: 15px;
    margin-top: 30px;
}

.btn-orange {
    background-color: var(--primary);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 8px;
    font-weight: 700;
    transition: all 0.3s;
    flex: 1;
}

.btn-orange:hover {
    background-color: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.btn-outline-orange {
    border: 2px solid var(--primary);
    color: var(--primary);
    background: transparent;
    padding: 12px 25px;
    border-radius: 8px;
    font-weight: 700;
    transition: all 0.3s;
    flex: 1;
}

.btn-outline-orange:hover {
    background-color: var(--primary);
    color: white;
}

.shipping-info {
    margin-top: 25px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
}

.shipping-info .item {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}

.shipping-info .item i {
    margin-left: 10px;
    color: var(--primary);
    font-size: 1.2rem;
}

.product-details {
    margin-top: 50px;
    background: white;
    border-radius: 12px;
    padding: 30px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
}

.details-tabs {
    border-bottom: 1px solid #dee2e6;
    margin-bottom: 25px;
}

.details-tabs .nav-link {
    border: none;
    color: var(--gray);
    font-weight: 600;
    padding: 12px 25px;
}

.details-tabs .nav-link.active {
    color: var(--primary);
    border-bottom: 3px solid var(--primary);
}

.description-content {
    line-height: 1.8;
    font-size: 1.1rem;
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.feature-card {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    text-align: center;
}

.feature-card i {
    font-size: 2rem;
    color: var(--primary);
    margin-bottom: 15px;
}

/* تحسينات للهاتف */
@media (max-width: 768px) {
    .product-page {
        padding: 20px 0;
    }
    
    .main-image {
        height: 300px;
    }
    
    .product-title {
        font-size: 1.5rem;
    }
    
    .current-price {
        font-size: 1.5rem;
    }
    
    .action-buttons {
        flex-direction: column;
    }
    
    .product-info {
        padding: 20px;
    }
}

/* أنماط السلة والتنبيهات (مأخوذة من الموقع الأصلي) */
.whatsapp-btn {
    position: fixed;
    bottom: 25px;
    left: 25px;
    z-index: 1000;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: #25D366;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    box-shadow: 0 5px 15px rgba(37, 211, 102, 0.3);
    transition: all 0.3s;
}

.whatsapp-btn:hover {
    transform: scale(1.1);
}

.status-indicator {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 2000;
    max-width: 350px;
}

.spinner-border {
    width: 1.5rem;
    height: 1.5rem;
    border-width: 0.2em;
}

.order-confirmation {
    background-color: rgba(255, 255, 255, 0.95);
    border-left: 5px solid var(--success);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.order-error {
    background-color: rgba(255, 255, 255, 0.95);
    border-left: 5px solid var(--danger);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.cart-icon-container {
    position: fixed;
    top: 80px;
    left: 20px;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.cart-btn {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--primary);
    color: white;
    border: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
    text-decoration: none;
    position: relative;
    margin-left: 1vh;
    top: 2vh;
}

.cart-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
    background-color: var(--primary-dark);
}

.cart-btn i {
    font-size: 1.5rem;
}

#cartCount {
    position: absolute;
    top: -5px;
    right: -5px;
    background-color: var(--danger);
    color: white;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    font-weight: bold;
    border: 2px solid white;
    animation: pulse 1.5s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.language-switcher {
    display: flex;
    gap: 5px;
}

/* تحسينات للشاشات الصغيرة */
@media (max-width: 768px) {
    .cart-icon-container {
        top: 70px;
        left: 15px;
    }
    
    .cart-btn {
        width: 50px;
        height: 50px;
    }
    
    .cart-btn i {
        font-size: 1.3rem;
    }
    
    #cartCount {
        width: 20px;
        height: 20px;
        font-size: 0.7rem;
    }
}
</style>
</head>

<body>
    <!-- نافبار مطابق للموقع الأصلي -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="https://i.postimg.cc/7P7BK44r/f525e1dd-9f2c-4160-aed1-882a8b28b75c-20250703-131500-0000.png" 
                     alt="Robuste Logo" class="d-inline-block align-top" 
                     style="width: 180px; height: auto; max-height: 50px; object-fit:fill;">
                <span class="d-none d-lg-inline fw-bold fs-4 ms-2" style="color: #FF6B35;">ROBUSTE eulma</span>
            </a>
            
            <!-- زر تغيير اللغة -->
            <div class="language-switcher me-3">
                <a href="ar/index.html" class="btn btn-sm btn-outline-secondary">العربية</a>
            </div>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item mx-2"><a class="nav-link" href="index.html">Accueil</a></li>
                    <li class="nav-item"><a class="nav-link" href="index.html#products">Produits</a></li>
                    <li class="nav-item"><a class="nav-link" href="index.html#reviews">Avis clients</a></li>
                    <li class="nav-item"><a class="nav-link" href="index.html#contact">Contactez-nous</a></li>
                </ul>
            </div>
            
            <!-- أيقونة السلة مع عداد -->
            <div class="cart-icon-container ms-lg-4">
                <span class="cart-label d-none d-lg-inline">panier</span>
                <a href="#" class="cart-btn position-relative" onclick="toggleCart(); return false;">
                    <i class="bi bi-cart3"></i>
                    <span class="position-absolute badge rounded-pill bg-danger" id="cartCount">0</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- مؤشر الحالة -->
    <div class="status-indicator" id="statusIndicator" style="display: none;">
        <div class="alert alert-dismissible fade show" role="alert">
            <span id="statusMessage"></span>
            <button type="button" class="btn-close" onclick="hideStatus()"></button>
        </div>
    </div>

    <!-- محتوى صفحة المنتج -->
    <div class="container product-page">
        <div class="row" id="productContainer">
            <!-- سيتم تعبئة هذا القسم بالبيانات الديناميكية -->
            <div class="text-center py-5">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Chargement...</span>
                </div>
                <p class="mt-3">Chargement du produit...</p>
            </div>
        </div>
    </div>

    <!-- فوتر مطابق للموقع الأصلي -->
    <footer class="py-5 bg-dark text-white">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h5 class="mb-3">À propos de ROBUSTE</h5>
                    <p>Magasin spécialisé dans l'électroménager de haute qualité à prix compétitifs. Nous proposons les meilleurs produits et une livraison rapide.</p>
                    <div class="mt-3">
                        <a href="https://www.facebook.com/share/19QooaXfy8/" class="social-icon"><i class="bi bi-facebook"></i> </a>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 mb-4">
                    <h5 class="mb-3">Liens rapides</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="index.html" class="text-white text-decoration-none">Accueil</a></li>
                        <li class="mb-2"><a href="index.html#products" class="text-white text-decoration-none">Produits</a></li>
                        <li class="mb-2"><a href="index.html#reviews" class="text-white text-decoration-none">Avis clients</a></li>
                        <li class="mb-2"><a href="index.html#contact" class="text-white text-decoration-none">Contactez-nous</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-md-4 mb-4">
                    <h5 class="mb-3">Service client</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">FAQ</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Modes de paiement</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Conditions de garantie</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-md-4 mb-4">
                    <h5 class="mb-3">Abonnez-vous à notre page</h5>
                    <p>Abonnez-vous pour recevoir les dernières offres</p>
                    <div class="mt-3">
                        <a href="https://www.facebook.com/share/19QooaXfy8/" class="btn btn-orange w-100" target="_blank">S'abonner</a>
                    </div>
                </div>
            </div>
            <hr class="my-4 bg-light">
            <div class="row">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    <p class="mb-0">&copy; 2025 ROBUSTE. Tous droits réservés.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <div class="d-flex flex-column flex-md-row align-items-center justify-content-md-end">
                        <p class="mb-2 mb-md-0 me-md-3">Paiement par carte gold disponible</p>
                        <img src="https://i.postimg.cc/bY06X2YN/logo-round.png" alt="Modes de paiement" style="width: 30px; height: auto;">
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- زر الواتساب -->
    <a href="https://wa.me/213656360457" class="whatsapp-btn" target="_blank">
        <i class="bi bi-whatsapp"></i>
    </a>

    <!-- سلة المشتريات -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="cartOffcanvas" aria-labelledby="cartOffcanvasLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="cartOffcanvasLabel">Panier d'achat</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div id="cartItems" class="mb-3">
                <div class="text-center py-4 text-muted" id="emptyCartMessage">
                    <i class="bi bi-cart-x display-4 d-block mb-2"></i>
                    Panier d'achat فارغة
                </div>
            </div>
            
            <div class="cart-summary border-top pt-3">
                <div class="d-flex justify-content-between mb-2">
                    <span>Total:</span>
                    <span id="cartTotal">0 د.ج</span>
                </div>
                <button class="btn btn-orange w-100" onclick="checkout()" id="checkoutBtn" disabled>
                    <i class="bi bi-bag-check"></i> Finaliser la commande
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // ============== تهيئة Firebase ==============
        const firebaseConfig = {
            apiKey: "AIzaSyBTrnKCYOtfSSDYtmVQbzP2HcwgkLT565Y",
            authDomain: "robuste-c8e0f.firebaseapp.com",
            projectId: "robuste-c8e0f",
            storageBucket: "robuste-c8e0f.appspot.com",
            messagingSenderId: "975609984963",
            appId: "1:975609984963:web:a481efb493a88d7bc7af76",
            measurementId: "G-DWT7MZN028"
        };

        // تهيئة Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // تهيئة EmailJS
        (function() {
            emailjs.init("k77vdaUWPpnLrfTnS");
        })();

        // ============== إدارة سلة المشتريات ==============
        let cart = [];
        try {
            const cartData = localStorage.getItem('robuste_cart');
            if (cartData) {
                cart = JSON.parse(cartData);
            }
        } catch (e) {
            console.error('Erreur lors du chargement du panier:', e);
            cart = [];
        }

        // تحديث عداد السلة
        function updateCartCount() {
            const cartCount = document.getElementById('cartCount');
            const checkoutBtn = document.getElementById('checkoutBtn');
            
            if (!cartCount || !checkoutBtn) return;
            
            const count = cart.reduce((total, item) => total + (item.quantity || 0), 0);
            cartCount.textContent = count;
            checkoutBtn.disabled = count === 0;
        }

        // إضافة منتج إلى السلة
        function addToCart(productName, productPrice, priceValue, productImages, productId) {
            const name = typeof productName === 'string' ? productName : 'Produit sans nom';
            const price = typeof priceValue === 'number' ? priceValue : 
                         typeof productPrice === 'number' ? productPrice : 0;
            const id = productId || Date.now().toString();
            
            let image = '';
            if (Array.isArray(productImages) && productImages.length > 0) {
                image = productImages[0];
            } else if (typeof productImages === 'string') {
                image = productImages;
            }
            
            const existingItemIndex = cart.findIndex(item => item.id === id);
            
            if (existingItemIndex >= 0) {
                cart[existingItemIndex].quantity += 1;
            } else {
                cart.push({
                    id: id,
                    name: name,
                    price: price,
                    image: image,
                    quantity: 1
                });
            }
            
            try {
                localStorage.setItem('robuste_cart', JSON.stringify(cart));
            } catch (e) {
                console.error('Erreur lors de la sauvegarde du panier:', e);
                showStatus('Impossible de sauvegarder le panier, la mémoire de stockage peut être pleine', 'error');
            }
            
            updateCartCount();
            showStatus(`"${name}" a été ajouté au panier`, 'success');
        }

        // إظهار/إخفاء السلة
        function toggleCart() {
            if (cart.length === 0) {
                showStatus('Le panier est vide', 'info');
                return;
            }
            
            try {
                const cartOffcanvas = new bootstrap.Offcanvas(document.getElementById('cartOffcanvas'));
                cartOffcanvas.show();
            } catch (e) {
                console.error('Erreur lors de l\'ouverture du panier:', e);
                document.getElementById('cartOffcanvas').classList.add('show');
                document.body.classList.add('offcanvas-open');
            }
        }

        // ============== جلب بيانات المنتج ==============
       async function loadProduct() {
    const urlParams = new URLSearchParams(window.location.search);
    const productId = parseInt(urlParams.get('pid'));
    
    if (!productId) {
        showProductError('ID de produit non spécifié');
        return;
    }
    
    try {
        // هذا هو السطر الذي تحتاج تغييره
        const response = await fetch('products.json');
        
        if (!response.ok) {
            throw new Error('Erreur lors du chargement des produits');
        }
        
        const products = await response.json();
        const product = products.find(p => p.id === productId);
        
        if (!product) {
            showProductError('Produit non trouvé');
            return;
        }
        
        renderProduct(product);
    } catch (error) {
        console.error('Erreur:', error);
        showProductError('Erreur lors du chargement du produit');
    }
}
        // عرض المنتج
        function renderProduct(product) {
            const container = document.getElementById('productContainer');
            
            // حساب نسبة الخصم
            const discountPercentage = product.old_price ? 
                Math.round(((product.old_price - product.price) / product.old_price) * 100) : 0;
            
            // إنشاء معرض الصور
            const thumbnails = product.images.map((img, index) => `
                <div class="thumbnail ${index === 0 ? 'active' : ''}" onclick="changeMainImage('${img}', this)">
                    <img src="${img}" alt="Miniature ${index + 1}" loading="lazy">
                </div>
            `).join('');
            
            // إنشاء قائمة المميزات
            const featuresList = product.features.map(feature => `
                <li>${feature}</li>
            `).join('');
            
            container.innerHTML = `
                <div class="col-lg-6 mb-5">
                    <div class="product-gallery">
                        <div class="main-image">
                            <img src="${product.images[0]}" alt="${product.title}" id="mainProductImage">
                        </div>
                        <div class="thumbnails">
                            ${thumbnails}
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-6 mb-5">
                    <div class="product-info">
                        ${product.badge ? `<span class="product-badge">${product.badge}</span>` : ''}
                        
                        <h1 class="product-title">${product.title}</h1>
                        
                        <div class="rating">
                            <div class="stars">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-half"></i>
                            </div>
                            <span class="rating-text">(4.2) · 128 avis</span>
                        </div>
                        
                        <div class="price-section">
                            ${product.old_price ? `
                                <span class="discount">-${discountPercentage}%</span>
                                <span class="old-price">${product.old_price.toLocaleString()} د.ج</span>
                            ` : ''}
                            <span class="current-price">${product.price.toLocaleString()} د.ج</span>
                        </div>
                        
                        <p class="lead">${product.description_short}</p>
                        
                        <div class="features-list">
                            <ul>
                                ${featuresList}
                            </ul>
                        </div>
                        
                        <div class="stock-info ${product.stock > 0 ? 'in-stock' : ''}">
                            <i class="bi ${product.stock > 0 ? 'bi-check-circle-fill' : 'bi-x-circle-fill'}"></i>
                            <span>${product.stock > 0 ? `En stock (${product.stock} disponible${product.stock > 1 ? 's' : ''})` : 'Rupture de stock'}</span>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn-orange" onclick="addToCart('${product.title}', '${product.price.toLocaleString()} د.ج', ${product.price}, ['${product.images.join("','")}'], ${product.id})">
                                <i class="bi bi-cart-plus"></i> Ajouter au panier
                            </button>
                            <button class="btn-outline-orange" onclick="buyNow('${product.title}', '${product.price.toLocaleString()} د.ج', ${product.price}, '${product.images[0]}', ${product.id})">
                                <i class="bi bi-bag-check"></i> Commander maintenant
                            </button>
                        </div>
                        
                        <div class="shipping-info">
                            <div class="item">
                                <i class="bi bi-truck"></i>
                                <span>Livraison gratuite à partir de 5000 د.ج</span>
                            </div>
                            <div class="item">
                                <i class="bi bi-shield-check"></i>
                                <span>Garantie 2 ans incluse</span>
                            </div>
                            <div class="item">
                                <i class="bi bi-arrow-clockwise"></i>
                                <span>Retour facile sous 14 jours</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-12">
                    <div class="product-details">
                        <ul class="nav nav-tabs details-tabs" id="productTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="description-tab" data-bs-toggle="tab" data-bs-target="#description" type="button" role="tab">Description</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="features-tab" data-bs-toggle="tab" data-bs-target="#features" type="button" role="tab">Caractéristiques</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab">Avis</button>
                            </li>
                        </ul>
                        
                        <div class="tab-content mt-4" id="productTabsContent">
                            <div class="tab-pane fade show active" id="description" role="tabpanel">
                                <div class="description-content">
                                    ${product.description_long}
                                </div>
                            </div>
                            
                            <div class="tab-pane fade" id="features" role="tabpanel">
                                <div class="features-grid">
                                    <div class="feature-card">
                                        <i class="bi bi-lightning-charge"></i>
                                        <h5>Haute performance</h5>
                                        <p>Technologie avancée pour des résultats optimaux</p>
                                    </div>
                                    <div class="feature-card">
                                        <i class="bi bi-shield-check"></i>
                                        <h5>Sécurité garantie</h5>
                                        <p>Normes de sécurité internationales</p>
                                    </div>
                                    <div class="feature-card">
                                        <i class="bi bi-award"></i>
                                        <h5>Qualité Robuste</h5>
                                        <p>Fabriqué avec des matériaux durables</p>
                                    </div>
                                    <div class="feature-card">
                                        <i class="bi bi-heart"></i>
                                        <h5>Conception ergonomique</h5>
                                        <p>Facile à utiliser au quotidien</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="tab-pane fade" id="reviews" role="tabpanel">
                                <div class="review-item mb-4">
                                    <div class="d-flex align-items-center mb-2">
                                        <div class="stars me-2">
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                        </div>
                                        <strong>Omar</strong>
                                    </div>
                                    <p>"Produit de très bonne qualité, je recommande!"</p>
                                </div>
                                
                                <div class="review-item mb-4">
                                    <div class="d-flex align-items-center mb-2">
                                        <div class="stars me-2">
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-half"></i>
                                        </div>
                                        <strong>Sarah</strong>
                                    </div>
                                    <p>"Très satisfaite de mon achat, livraison rapide."</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // تهيئة التبويبات
            const triggerTabList = [].slice.call(document.querySelectorAll('#productTabs button'));
            triggerTabList.forEach(function (triggerEl) {
                var tabTrigger = new bootstrap.Tab(triggerEl);
                triggerEl.addEventListener('click', function (event) {
                    event.preventDefault();
                    tabTrigger.show();
                });
            });
        }

        // تغيير الصورة الرئيسية
        function changeMainImage(src, element) {
            document.getElementById('mainProductImage').src = src;
            
            // إزالة النشط من جميع الصور المصغرة
            document.querySelectorAll('.thumbnail').forEach(thumb => {
                thumb.classList.remove('active');
            });
            
            // إضافة النشط للصورة المحددة
            element.classList.add('active');
        }

        // شراء مباشر
        function buyNow(productName, productPrice, priceValue, productImage, productId) {
            addToCart(productName, productPrice, priceValue, [productImage], productId);
            toggleCart();
        }

        // عرض خطأ المنتج
        function showProductError(message) {
            const container = document.getElementById('productContainer');
            container.innerHTML = `
                <div class="col-12 text-center py-5">
                    <i class="bi bi-exclamation-triangle display-1 text-danger"></i>
                    <h3 class="mt-3">${message}</h3>
                    <p class="mb-4">Nous n'avons pas pu trouver le produit demandé.</p>
                    <a href="index.html" class="btn btn-orange btn-lg">
                        <i class="bi bi-arrow-left"></i> Retour à l'accueil
                    </a>
                </div>
            `;
        }

        // ============== وظائف عرض الحالة ==============
        function showStatus(message, type) {
            const indicator = document.getElementById('statusIndicator');
            const messageElement = document.getElementById('statusMessage');
            
            messageElement.innerHTML = message;
            
            const alert = indicator.querySelector('.alert');
            alert.className = 'alert alert-dismissible fade show';
            
            switch (type) {
                case 'success':
                    alert.classList.add('alert-success', 'order-confirmation');
                    break;
                case 'error':
                    alert.classList.add('alert-danger', 'order-error');
                    break;
                case 'info':
                    alert.classList.add('alert-info');
                    break;
                default:
                    alert.classList.add('alert-info');
            }
            
            indicator.style.display = 'block';
            
            if (type === 'success') {
                setTimeout(hideStatus, 5000);
            }
        }

        function hideStatus() {
            document.getElementById('statusIndicator').style.display = 'none';
        }

        // ============== تهيئة الصفحة ==============
        document.addEventListener('DOMContentLoaded', function() {
            updateCartCount();
            loadProduct();
        });
    </script>
</body>
</html>
